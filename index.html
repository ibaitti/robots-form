<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ROBOTS • Pre-Call Qualification</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap');

    :root {
      --bg-page-start: #F4F5FB;
      --bg-page-end: #E7F0FF;
      --bg-card-glass: rgba(255,255,255,0.82);
      --text-primary: #020617;
      --text-secondary: #6B7280;
      --text-tertiary: #9CA3AF;
      --border-soft: rgba(148,163,184,0.35);
      --border-strong: #E2E8F0;
      --accent-cyan: #06B6D4;
      --accent-gold: #F4C15D;
      --danger: #DC2626;
      --success: #16A34A;

      --shadow-card: 0 18px 45px rgba(15,23,42,0.12);
      --shadow-card-hover: 0 24px 70px rgba(15,23,42,0.16);
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      color: var(--text-primary);
      background: linear-gradient(135deg, var(--bg-page-start) 0%, var(--bg-page-end) 100%);
      display: flex;
      align-items: stretch;
      justify-content: center;
    }

    .starfield {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 40vh;
      pointer-events: none;
      background-image:
        radial-gradient(circle at 20% 20%, rgba(255,255,255,0.35) 0, rgba(255,255,255,0.35) 1px, transparent 2px),
        radial-gradient(circle at 60% 10%, rgba(255,255,255,0.35) 0, rgba(255,255,255,0.35) 1px, transparent 2px),
        radial-gradient(circle at 80% 30%, rgba(255,255,255,0.35) 0, rgba(255,255,255,0.35) 1px, transparent 2px),
        radial-gradient(circle at 10% 40%, rgba(255,255,255,0.35) 0, rgba(255,255,255,0.35) 1px, transparent 2px);
      background-repeat: no-repeat;
      background-size: 400px 400px, 500px 500px, 600px 600px, 700px 700px;
      opacity: 0.9;
      z-index: 0;
    }

    .app-shell {
      position: relative;
      width: 100%;
      max-width: 900px;
      margin: 0 auto;
      padding: 32px 16px;
      z-index: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      min-height: 100vh;
    }

    .header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 16px;
      gap: 16px;
    }

    .brand {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .brand-title {
      font-family: 'Space Grotesk', system-ui, sans-serif;
      font-size: 20px;
      letter-spacing: 0.12em;
      font-weight: 600;
    }

    .brand-tagline {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .trust {
      text-align: right;
      font-size: 12px;
      color: var(--text-secondary);
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .trust-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.5);
      background: rgba(255,255,255,0.85);
      backdrop-filter: blur(12px);
      font-size: 11px;
    }

    .trust-pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 3px rgba(34,197,94,0.35);
    }

    .trust-meta {
      font-size: 11px;
      color: var(--text-tertiary);
    }

    .card {
      background: var(--bg-card-glass);
      backdrop-filter: blur(18px);
      border-radius: 24px;
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-card);
      padding: 24px 20px 16px;
      transition: box-shadow 160ms ease, transform 160ms ease;
    }

    .card:hover {
      box-shadow: var(--shadow-card-hover);
      transform: translateY(-1px);
    }

    @media (min-width: 768px) {
      .card {
        padding: 28px 28px 18px;
      }
    }

    .card-header-strip {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 18px;
    }

    .step-counter {
      font-size: 12px;
      color: var(--text-secondary);
      white-space: nowrap;
    }

    .step-counter strong {
      font-weight: 600;
    }

    .progress-container {
      flex: 1;
      height: 6px;
      border-radius: 999px;
      background: #e2e8f0;
      overflow: hidden;
      position: relative;
    }

    .progress-bar-fill {
      height: 100%;
      width: 0%;
      border-radius: 999px;
      box-shadow: 0 0 18px rgba(6,182,212,0.55);
      transition: width 200ms ease, background 200ms ease;
    }

    .progress-fill-cyan {
      background: var(--accent-cyan);
    }

    .progress-fill-gold {
      background: linear-gradient(90deg, #FDE68A, #F4C15D);
      box-shadow: 0 0 22px rgba(244,193,93,0.55);
    }

    .step-phase {
      font-size: 12px;
      color: var(--text-secondary);
      white-space: nowrap;
      position: relative;
      padding-bottom: 2px;
    }

    .step-phase::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      height: 2px;
      width: 24px;
      background: var(--accent-cyan);
      border-radius: 999px;
    }

    .step-phase-gold-dot::before {
      content: "";
      position: absolute;
      right: -10px;
      top: 2px;
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent-gold);
      box-shadow: 0 0 8px rgba(244,193,93,0.9);
    }

    .intro-card {
      border-radius: 18px;
      padding: 14px 14px 10px;
      border: 1px solid rgba(226,232,240,0.9);
      background: rgba(248,250,252,0.85);
      margin-bottom: 18px;
    }

    .intro-label {
      font-size: 11px;
      font-weight: 600;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 6px;
    }

    .intro-list {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
      color: var(--text-secondary);
      padding-left: 0;
      margin: 0;
      list-style: none;
    }

    .intro-list-item {
      display: flex;
      gap: 6px;
      align-items: flex-start;
    }

    .intro-list-index {
      font-size: 11px;
      font-weight: 600;
      color: var(--text-tertiary);
      flex-shrink: 0;
      margin-top: 2px;
    }

    .intro-list-text {
      flex: 1;
    }

    .form-title-block {
      margin-bottom: 10px;
    }

    .form-main-title {
      font-family: 'Space Grotesk', system-ui, sans-serif;
      font-size: 22px;
      font-weight: 500;
      margin: 0 0 4px;
    }

    .form-subtext {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 0;
    }

    .step-label {
      font-size: 12px;
      font-weight: 500;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-tertiary);
      margin-bottom: 4px;
    }

    .step-heading {
      font-family: 'Space Grotesk', system-ui, sans-serif;
      font-size: 20px;
      font-weight: 500;
      margin: 0 0 6px;
    }

    .step-question {
      font-size: 14px;
      color: var(--text-secondary);
      margin: 0 0 12px;
    }

    .field-group {
      margin-bottom: 12px;
    }

    label.field-label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 4px;
    }

    .field-hint {
      font-size: 11px;
      color: var(--text-tertiary);
      margin-bottom: 4px;
    }

    .input,
    .textarea {
      width: 100%;
      border-radius: 10px;
      border: 1px solid var(--border-strong);
      padding: 9px 11px;
      font-size: 13px;
      font-family: inherit;
      background: #F9FAFB;
      color: var(--text-primary);
      outline: none;
      transition: border-color 140ms ease, box-shadow 140ms ease, background 140ms ease;
      resize: vertical;
      min-height: 96px;
    }

    .input {
      min-height: auto;
      padding: 8px 11px;
    }

    .input:focus,
    .textarea:focus {
      border-color: var(--accent-cyan);
      box-shadow: 0 0 0 1px rgba(6,182,212,0.6);
      background: #ffffff;
    }

    .textarea-gold {
      border-color: rgba(244,193,93,0.7);
      box-shadow: 0 0 40px rgba(244,193,93,0.35);
      background: #FFFBEB;
    }

    .textarea-gold:focus {
      border-color: rgba(244,193,93,0.9);
      box-shadow: 0 0 44px rgba(244,193,93,0.5);
      background: #FFFBEB;
    }

    .input-disabled {
      background: #EEF2FF;
      color: #9CA3AF;
    }

    .field-error {
      margin-top: 4px;
      font-size: 11px;
      color: var(--danger);
      min-height: 14px;
    }

    .radio-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .radio-option {
      border-radius: 999px;
      border: 1px solid var(--border-strong);
      padding: 7px 10px;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 8px;
      background: #ffffff;
      cursor: pointer;
      transition: border-color 140ms ease, background 140ms ease, box-shadow 140ms ease;
    }

    .radio-input {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    .radio-mark {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      border: 1px solid var(--border-strong);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .radio-mark-inner {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: transparent;
    }

    .radio-label-text {
      flex: 1;
    }

    .radio-option.selected {
      border-color: var(--accent-cyan);
      box-shadow: 0 0 0 1px rgba(6,182,212,0.35);
      background: rgba(6,182,212,0.10);
    }

    .radio-option.selected .radio-mark {
      border-color: var(--accent-cyan);
    }

    .radio-option.selected .radio-mark-inner {
      background: var(--accent-cyan);
    }

    .radio-option:focus-within {
      border-color: var(--accent-cyan);
      box-shadow: 0 0 0 1px rgba(6,182,212,0.6);
    }

    .wizard-footer {
      margin-top: 14px;
      padding-top: 10px;
      border-top: 1px solid rgba(226,232,240,0.8);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .footer-left-note {
      font-size: 11px;
      color: var(--text-tertiary);
    }

    .button-row {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }

    .btn {
      border-radius: 999px;
      padding: 9px 18px;
      font-size: 13px;
      font-weight: 500;
      border: 1px solid transparent;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: background 140ms ease, border-color 140ms ease, box-shadow 140ms ease, transform 60ms ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: #2563EB;
      color: #ffffff;
      border-color: transparent;
    }

    .btn-primary:hover:not(:disabled) {
      background: linear-gradient(135deg, #2563EB, #4F46E5);
      box-shadow: 0 0 0 1px rgba(37,99,235,0.25);
    }

    .btn-primary:active:not(:disabled) {
      background: #1D4ED8;
      transform: scale(0.95);
    }

    .btn-secondary {
      background: transparent;
      color: #0F172A;
      border-color: #E2E8F0;
    }

    .btn-secondary:hover:not(:disabled) {
      border-color: var(--accent-cyan);
      background: rgba(6,182,212,0.04);
    }

    .btn:disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    .btn-primary:disabled {
      background: #93C5FD;
      color: #E5E7EB;
    }

    .footer-strip {
      margin-top: 14px;
      padding-top: 8px;
      padding-bottom: 4px;
      background: rgba(15,23,42,0.02);
      border-radius: 0 0 18px 18px;
      font-size: 11px;
      color: var(--text-tertiary);
      text-align: center;
    }

    .steps-container {
      margin-top: 10px;
      min-height: 260px;
    }

    .step-view {
      display: none;
    }

    .step-view.active {
      display: block;
    }

    .roi-layout {
      margin-top: 10px;
      display: grid;
      grid-template-columns: 1.3fr 1fr;
      gap: 12px;
    }

    @media (max-width: 720px) {
      .roi-layout {
        grid-template-columns: 1fr;
      }
    }

    .roi-card {
      border-radius: 16px;
      border: 1px solid var(--border-strong);
      padding: 12px 12px 10px;
      background: #ffffff;
      position: relative;
      overflow: hidden;
    }

    .roi-badge {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-tertiary);
      margin-bottom: 4px;
    }

    .roi-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .roi-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 8px 12px;
      font-size: 12px;
    }

    .roi-label {
      color: var(--text-secondary);
    }

    .roi-value {
      font-weight: 500;
      text-align: right;
    }

    .roi-value-success {
      color: var(--success);
    }

    .roi-cyan-bar {
      position: absolute;
      right: 10px;
      bottom: 8px;
      width: 70px;
      height: 3px;
      border-radius: 999px;
      background: var(--accent-cyan);
      box-shadow: 0 0 10px rgba(6,182,212,0.8);
      opacity: 0.85;
    }

    .roi-note {
      font-size: 11px;
      color: var(--text-tertiary);
      margin-top: 4px;
    }

    .hourly-cost-input {
      margin-top: 6px;
    }

    .completion-screen {
      display: none;
      margin-top: 6px;
    }

    .completion-screen.active {
      display: block;
    }

    .completion-header {
      font-family: 'Space Grotesk', system-ui, sans-serif;
      font-size: 20px;
      font-weight: 500;
      margin-bottom: 6px;
    }

    .completion-subtext {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 10px;
    }

    .completion-list {
      font-size: 12px;
      color: var(--text-secondary);
      margin: 0 0 10px 16px;
    }

    .completion-recap {
      border-radius: 14px;
      border: 1px solid var(--border-strong);
      padding: 10px 12px;
      background: #ffffff;
      margin-bottom: 10px;
      font-size: 12px;
    }

    .completion-recap-title {
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .completion-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 3px;
    }

    .completion-label {
      color: var(--text-secondary);
    }

    .completion-value {
      font-weight: 500;
      text-align: right;
    }

    .completion-agent-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      font-size: 11px;
      margin-bottom: 6px;
      background: rgba(248,250,252,0.9);
    }

    .completion-agent-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent-cyan);
    }

    .global-error {
      font-size: 11px;
      color: var(--danger);
      text-align: right;
      min-height: 14px;
      margin-top: 4px;
    }
  </style>
</head>
<body>
<div class="starfield"></div>
<div class="app-shell">
  <header class="header">
    <div class="brand">
      <div class="brand-title">ROBOTS</div>
      <div class="brand-tagline">AI Employees For Revenue Teams</div>
    </div>
    <div class="trust">
      <div class="trust-pill">
        <span class="trust-pill-dot"></span>
        <span>Connection secure • Encrypted</span>
      </div>
      <div class="trust-meta">Average completion &lt; 2:30</div>
    </div>
  </header>

  <main class="card" aria-live="polite">
    <!-- Progress Strip -->
    <div class="card-header-strip">
      <div class="step-counter">
        Step <strong id="step-counter-current">1</strong> of <strong id="step-counter-total">6</strong>
      </div>
      <div class="progress-container" aria-hidden="true">
        <div id="progress-bar-fill" class="progress-bar-fill progress-fill-cyan"></div>
      </div>
      <div id="step-phase-label" class="step-phase">
        Context
      </div>
    </div>

    <!-- Intro Card -->
    <section class="intro-card">
      <div class="intro-label">How this works</div>
      <ul class="intro-list">
        <li class="intro-list-item">
          <span class="intro-list-index">01</span>
          <span class="intro-list-text">Map 3–5 repetitive workflows over the next 30–90 days.</span>
        </li>
        <li class="intro-list-item">
          <span class="intro-list-index">02</span>
          <span class="intro-list-text">Align those workflows with your growth target: revenue, pipeline, or efficiency.</span>
        </li>
        <li class="intro-list-item">
          <span class="intro-list-index">03</span>
          <span class="intro-list-text">Jump on a 30-minute mapping call to see where a digital employee can take full ownership.</span>
        </li>
      </ul>
    </section>

    <!-- Form Title -->
    <section class="form-title-block">
      <h1 class="form-main-title">Pre-Call Qualification • 6 steps</h1>
      <p class="form-subtext">
        In 6 questions we'll identify where an AI employee can fit into your business.
      </p>
    </section>

    <!-- Wizard -->
    <div id="wizard-container">
      <div class="steps-container">
        <!-- Step 1 -->
        <section id="step-1" class="step-view active" aria-label="Step 1">
          <div class="step-label">Context</div>
          <h2 class="step-heading">01. Immediate workflows</h2>
          <p class="step-question">
            If you had a digital employee that could handle 3–5 repetitive workflows in the next 30 days,
            which ones would you pick first?
          </p>

          <div class="field-group">
            <label class="field-label" for="workflows">Repetitive workflows</label>
            <div class="field-hint">Example: inbound lead triage, follow-up emails, CRM updates.</div>
            <textarea id="workflows" class="textarea" name="workflows" minlength="10" maxlength="2000"
                      aria-describedby="error-workflows"></textarea>
            <div id="error-workflows" class="field-error"></div>
          </div>

          <div class="field-group">
            <label class="field-label" for="hoursPerWeek">Hours/week spent on these workflows</label>
            <div class="field-hint">Approximate total across you and your team. Set &gt; 0 to see ROI.</div>
            <input id="hoursPerWeek" class="input" type="number" inputmode="decimal" min="0" max="168"
                   step="0.5" aria-describedby="error-hoursPerWeek" />
            <div id="error-hoursPerWeek" class="field-error"></div>
          </div>
        </section>

        <!-- Step 2 -->
        <section id="step-2" class="step-view" aria-label="Step 2">
          <div class="step-label">Money Leaks</div>
          <h2 class="step-heading">02. 90-Day Vision</h2>
          <p class="step-question">
            90 days from now, if this works exactly as you want—what's the one thing you'd love to be true about your business?
          </p>

          <div class="field-group">
            <label class="field-label" for="vision90Day">Your 90-day outcome</label>
            <div class="field-hint">Be specific: numbers, conversion rates, pipeline, or efficiency wins.</div>
            <textarea id="vision90Day" class="textarea textarea-gold" name="vision90Day" minlength="10" maxlength="2000"
                      aria-describedby="error-vision90Day"></textarea>
            <div id="error-vision90Day" class="field-error"></div>
          </div>
        </section>

        <!-- Step 3 -->
        <section id="step-3" class="step-view" aria-label="Step 3">
          <div class="step-label">Workload Map</div>
          <h2 class="step-heading">03. Business & Customer</h2>
          <p class="step-question">
            What does your company sell, and who is your ideal customer?
          </p>

          <div class="field-group">
            <label class="field-label" for="businessAndCustomer">Your product and ideal customer</label>
            <div class="field-hint">Include average deal size or sales cycle if relevant.</div>
            <textarea id="businessAndCustomer" class="textarea" name="businessAndCustomer" minlength="10" maxlength="2000"
                      aria-describedby="error-businessAndCustomer"></textarea>
            <div id="error-businessAndCustomer" class="field-error"></div>
          </div>
        </section>

        <!-- Step 4 -->
        <section id="step-4" class="step-view" aria-label="Step 4">
          <div class="step-label">Automation Fit</div>
          <h2 class="step-heading">04. Your Role</h2>
          <p class="step-question">What best describes your role?</p>

          <div class="field-group">
            <div class="radio-group" id="role-group" aria-describedby="error-role">
              <label class="radio-option" data-value="founder_owner">
                <input class="radio-input" type="radio" name="role" value="founder_owner" />
                <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                <span class="radio-label-text">Founder / Owner</span>
              </label>
              <label class="radio-option" data-value="c_level_vp">
                <input class="radio-input" type="radio" name="role" value="c_level_vp" />
                <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                <span class="radio-label-text">C-Level / VP</span>
              </label>
              <label class="radio-option" data-value="operations_systems">
                <input class="radio-input" type="radio" name="role" value="operations_systems" />
                <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                <span class="radio-label-text">Operations / Systems</span>
              </label>
              <label class="radio-option" data-value="marketing_sales">
                <input class="radio-input" type="radio" name="role" value="marketing_sales" />
                <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                <span class="radio-label-text">Marketing / Sales</span>
              </label>
              <label class="radio-option" data-value="other">
                <input class="radio-input" type="radio" name="role" value="other" />
                <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                <span class="radio-label-text">Other</span>
              </label>
            </div>
            <div id="error-role" class="field-error"></div>
          </div>
        </section>

        <!-- Step 5 -->
        <section id="step-5" class="step-view" aria-label="Step 5">
          <div class="step-label">Automation Fit</div>
          <h2 class="step-heading">05. Company Size</h2>
          <p class="step-question">How big is your company today?</p>

          <div class="field-group">
            <div class="radio-group" id="companySize-group" aria-describedby="error-companySize">
              <label class="radio-option" data-value="1_5">
                <input class="radio-input" type="radio" name="companySize" value="1_5" />
                <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                <span class="radio-label-text">1–5</span>
              </label>
              <label class="radio-option" data-value="6_20">
                <input class="radio-input" type="radio" name="companySize" value="6_20" />
                <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                <span class="radio-label-text">6–20</span>
              </label>
              <label class="radio-option" data-value="21_50">
                <input class="radio-input" type="radio" name="companySize" value="21_50" />
                <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                <span class="radio-label-text">21–50</span>
              </label>
              <label class="radio-option" data-value="51_200">
                <input class="radio-input" type="radio" name="companySize" value="51_200" />
                <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                <span class="radio-label-text">51–200</span>
              </label>
              <label class="radio-option" data-value="200_plus">
                <input class="radio-input" type="radio" name="companySize" value="200_plus" />
                <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                <span class="radio-label-text">200+</span>
              </label>
            </div>
            <div id="error-companySize" class="field-error"></div>
          </div>
        </section>

        <!-- Step 6 -->
        <section id="step-6" class="step-view" aria-label="Step 6">
          <div class="step-label">ROI Preview</div>
          <h2 class="step-heading">06. Urgency</h2>
          <p class="step-question">How urgent is it to get a digital employee in place?</p>

          <div class="roi-layout">
            <div>
              <div class="field-group">
                <label class="field-label">Timeline & urgency</label>
                <div class="radio-group" id="urgency-group" aria-describedby="error-urgency">
                  <label class="radio-option" data-value="info_gathering">
                    <input class="radio-input" type="radio" name="urgency" value="info_gathering" />
                    <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                    <span class="radio-label-text">Just researching / gathering info.</span>
                  </label>
                  <label class="radio-option" data-value="sometime">
                    <input class="radio-input" type="radio" name="urgency" value="sometime" />
                    <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                    <span class="radio-label-text">Open to this sometime this year.</span>
                  </label>
                  <label class="radio-option" data-value="critical_60_days">
                    <input class="radio-input" type="radio" name="urgency" value="critical_60_days" />
                    <span class="radio-mark"><span class="radio-mark-inner"></span></span>
                    <span class="radio-label-text">This is critical in the next 60 days.</span>
                  </label>
                </div>
                <div id="error-urgency" class="field-error"></div>
              </div>

              <div class="field-group hourly-cost-input">
                <label class="field-label" for="hourlyCost">Average hourly cost ($)</label>
                <div class="field-hint">Default assumes fully loaded cost. Adjust if needed.</div>
                <input id="hourlyCost" class="input" type="number" inputmode="decimal" min="10" max="500" step="5"
                       aria-describedby="error-hourlyCost" />
                <div id="error-hourlyCost" class="field-error"></div>
              </div>
            </div>

            <div>
              <div class="roi-card" aria-live="polite">
                <div class="roi-badge">ROI Preview</div>
                <div class="roi-title">Manual Work Burn</div>
                <div class="roi-grid">
                  <div class="roi-label">Hours per week on these workflows</div>
                  <div id="roi-hoursPerWeek" class="roi-value">–</div>

                  <div class="roi-label">Average hourly cost ($)</div>
                  <div id="roi-hourlyCost" class="roi-value">–</div>

                  <div class="roi-label">Hours burnt / month</div>
                  <div id="roi-monthlyHours" class="roi-value">–</div>

                  <div class="roi-label">Money burnt / month</div>
                  <div id="roi-monthlyBurn" class="roi-value">–</div>

                  <div class="roi-label">Potential savings / month (70% automation)</div>
                  <div id="roi-savings" class="roi-value roi-value-success">–</div>
                </div>
                <div class="roi-note" id="roi-note-message">
                  Set hours &gt; 0 in Step 1 to see a concrete ROI preview.
                </div>
                <div class="roi-cyan-bar"></div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <div class="wizard-footer">
        <div class="footer-left-note" id="agent-note">
          AI employee assigned: <span id="agent-name-label"></span>
        </div>
        <div class="button-row">
          <button id="back-button" type="button" class="btn btn-secondary">Back</button>
          <button id="next-button" type="button" class="btn btn-primary">Next</button>
          <button id="submit-button" type="button" class="btn btn-primary" style="display:none;">
            <span id="submit-button-label">Submit answers</span>
          </button>
        </div>
      </div>

      <div id="global-error" class="global-error"></div>

      <div class="footer-strip">
        © 2025 ROBOTS Inc. All systems operational.
      </div>
    </div>

    <!-- Completion Screen -->
    <div id="completion-screen" class="completion-screen" aria-live="polite">
      <div class="completion-header">
        Quietly retire manual work, one digital employee at a time.
      </div>
      <div class="completion-subtext">
        We'll review your answers and highlight where a digital employee can take full ownership.
        You'll see a mapped 90-day outcome, not just a list of tools. From there, you can decide
        whether to move straight into build mode.
      </div>

      <div class="completion-agent-pill">
        <span class="completion-agent-dot"></span>
        <span>Assigned AI employee: <strong id="completion-agent-name"></strong></span>
      </div>

      <div class="completion-recap">
        <div class="completion-recap-title">ROI snapshot</div>
        <div class="completion-row">
          <span class="completion-label">Hours/week on workflows</span>
          <span id="completion-hoursPerWeek" class="completion-value">–</span>
        </div>
        <div class="completion-row">
          <span class="completion-label">Hours burnt / month</span>
          <span id="completion-monthlyHours" class="completion-value">–</span>
        </div>
        <div class="completion-row">
          <span class="completion-label">Money burnt / month</span>
          <span id="completion-monthlyBurn" class="completion-value">–</span>
        </div>
        <div class="completion-row">
          <span class="completion-label">Potential savings / month</span>
          <span id="completion-savings" class="completion-value" style="color:var(--success);">–</span>
        </div>
        <div class="completion-row">
          <span class="completion-label">Company size</span>
          <span id="completion-companySize" class="completion-value">–</span>
        </div>
        <div class="completion-row">
          <span class="completion-label">Urgency</span>
          <span id="completion-urgency" class="completion-value">–</span>
        </div>
      </div>

      <ul class="completion-list">
        <li>We'll map exactly where your digital employee can take full ownership of manual work.</li>
        <li>You'll see a 90-day outcome mapped against your revenue, pipeline, or efficiency targets.</li>
        <li>From there, you can decide whether to move directly into build mode.</li>
      </ul>

      <div class="button-row" style="margin-top: 8px;">
        <button id="schedule-call-button" type="button" class="btn btn-primary">
          Schedule a call
        </button>
      </div>
      <div class="footer-left-note" style="margin-top: 4px; text-align:right;">
        Opens a 30-minute mapping call calendar in a new tab.
      </div>
    </div>
  </main>
</div>

<script>
  // ---------- Config ----------
  const TOTAL_STEPS = 6;
  const STEP_PHASES = [
    'Context',
    'Money Leaks',
    'Workload Map',
    'Automation Fit',
    'ROI Preview',
    'Call Setup'
  ];

  const AGENT_NAMES = ['Atlas', 'Nova', 'Relay', 'Helix', 'Circuit', 'Ion', 'Lucid', 'Vertex'];

  const N8N_WEBHOOK_URL = 'https://zerogpt.app.n8n.cloud/webhook-test/form-one'; // In a full stack setup, frontend would call /api/submit and backend would forward here.
  const CALENDAR_URL = 'https://cal.com/ibaitti';
  const HOURLY_COST_DEFAULT = 50;
  const HOURS_MAX = 168;
  const HOURS_REALISTIC_WARNING_THRESHOLD = 100;
  const HOURLY_MIN = 10;
  const HOURLY_MAX = 500;
  const AUTOMATION_RATE = 0.7;

  // ---------- Analytics Stub ----------
  function trackEvent(name, data) {
    // Stub: integrate with real analytics later
    console.log('[analytics]', name, data || {});
  }

  // ---------- Utility ----------
  function generateUUIDv4() {
    if (crypto && crypto.randomUUID) return crypto.randomUUID();
    // Fallback
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {
      const r = (Math.random() * 16) | 0;
      const v = c === 'x' ? r : (r & 0x3) | 0x8;
      return v.toString(16);
    });
  }

  function clamp(value, min, max) {
    return Math.min(max, Math.max(min, value));
  }

  function truncateText(str, maxLen) {
    if (typeof str !== 'string') return '';
    if (str.length <= maxLen) return str;
    return str.slice(0, maxLen);
  }

  function formatCurrency(num) {
    if (isNaN(num)) return '–';
    return '$' + num.toLocaleString(undefined, { maximumFractionDigits: 0 });
  }

  function formatNumber(num) {
    if (isNaN(num)) return '–';
    return num.toLocaleString(undefined, { maximumFractionDigits: 0 });
  }

  function mapCompanySizeLabel(value) {
    switch (value) {
      case '1_5': return '1–5';
      case '6_20': return '6–20';
      case '21_50': return '21–50';
      case '51_200': return '51–200';
      case '200_plus': return '200+';
      default: return '–';
    }
  }

  function mapUrgencyLabel(value) {
    switch (value) {
      case 'info_gathering':
        return 'Just researching / gathering info.';
      case 'sometime':
        return 'Open to this sometime this year.';
      case 'critical_60_days':
        return 'Critical in the next 60 days.';
      default:
        return '–';
    }
  }

  // ROI pure function
  function computeROI(hoursPerWeek, hourlyCost, automationRate) {
    const h = Math.max(0, Number(hoursPerWeek) || 0);
    const c = Math.max(HOURLY_MIN, Math.min(HOURLY_MAX, Number(hourlyCost) || HOURLY_COST_DEFAULT));
    const a = automationRate;
    const monthlyHours = h * 4.33;
    const monthlyBurn = monthlyHours * c;
    const savings = monthlyBurn * a;

    return {
      hoursPerWeek: h,
      monthlyHours,
      monthlyBurn,
      savings,
      hourlyCost: c,
      automationRate: a
    };
  }

  // ROI tests (console only)
  (function roiTests() {
    console.log('[roi-tests] starting');
    const cases = [
      { h: 0, c: 50 },
      { h: 10, c: 50 },
      { h: 40, c: 50 },
      { h: 40, c: 100 }
    ];
    cases.forEach(c => {
      console.log('[roi-tests]', c, computeROI(c.h, c.c, AUTOMATION_RATE));
    });
    console.log('[roi-tests] done');
  })();

  // ---------- State ----------
  const state = {
    currentStep: 1,
    formValues: {
      workflows: '',
      hoursPerWeek: 0,
      vision90Day: '',
      businessAndCustomer: '',
      role: '',
      companySize: '',
      urgency: '',
      agentName: ''
    },
    roi: {
      hoursPerWeek: 0,
      monthlyHours: 0,
      monthlyBurn: 0,
      savings: 0,
      hourlyCost: HOURLY_COST_DEFAULT,
      automationRate: AUTOMATION_RATE
    },
    submissionId: null,
    submitted: false,
    submitting: false
  };

  // ---------- DOM Refs ----------
  const stepCounterCurrentEl = document.getElementById('step-counter-current');
  const stepCounterTotalEl = document.getElementById('step-counter-total');
  const progressBarFillEl = document.getElementById('progress-bar-fill');
  const stepPhaseLabelEl = document.getElementById('step-phase-label');

  const agentNameLabelEl = document.getElementById('agent-name-label');

  const backButtonEl = document.getElementById('back-button');
  const nextButtonEl = document.getElementById('next-button');
  const submitButtonEl = document.getElementById('submit-button');
  const submitButtonLabelEl = document.getElementById('submit-button-label');
  const globalErrorEl = document.getElementById('global-error');

  const wizardContainerEl = document.getElementById('wizard-container');
  const completionScreenEl = document.getElementById('completion-screen');

  const workflowsEl = document.getElementById('workflows');
  const hoursPerWeekEl = document.getElementById('hoursPerWeek');
  const vision90DayEl = document.getElementById('vision90Day');
  const businessAndCustomerEl = document.getElementById('businessAndCustomer');
  const hourlyCostEl = document.getElementById('hourlyCost');

  const errorWorkflowsEl = document.getElementById('error-workflows');
  const errorHoursPerWeekEl = document.getElementById('error-hoursPerWeek');
  const errorVision90DayEl = document.getElementById('error-vision90Day');
  const errorBusinessAndCustomerEl = document.getElementById('error-businessAndCustomer');
  const errorRoleEl = document.getElementById('error-role');
  const errorCompanySizeEl = document.getElementById('error-companySize');
  const errorUrgencyEl = document.getElementById('error-urgency');
  const errorHourlyCostEl = document.getElementById('error-hourlyCost');

  // ROI DOM
  const roiHoursPerWeekEl = document.getElementById('roi-hoursPerWeek');
  const roiHourlyCostEl = document.getElementById('roi-hourlyCost');
  const roiMonthlyHoursEl = document.getElementById('roi-monthlyHours');
  const roiMonthlyBurnEl = document.getElementById('roi-monthlyBurn');
  const roiSavingsEl = document.getElementById('roi-savings');
  const roiNoteMessageEl = document.getElementById('roi-note-message');

  // Completion DOM
  const completionAgentNameEl = document.getElementById('completion-agent-name');
  const completionHoursPerWeekEl = document.getElementById('completion-hoursPerWeek');
  const completionMonthlyHoursEl = document.getElementById('completion-monthlyHours');
  const completionMonthlyBurnEl = document.getElementById('completion-monthlyBurn');
  const completionSavingsEl = document.getElementById('completion-savings');
  const completionCompanySizeEl = document.getElementById('completion-companySize');
  const completionUrgencyEl = document.getElementById('completion-urgency');
  const scheduleCallButtonEl = document.getElementById('schedule-call-button');

  // ---------- Init ----------
  function init() {
    stepCounterTotalEl.textContent = String(TOTAL_STEPS);
    // Agent name
    const agentName = AGENT_NAMES[Math.floor(Math.random() * AGENT_NAMES.length)];
    state.formValues.agentName = agentName;
    agentNameLabelEl.textContent = agentName;

    // Defaults
    hourlyCostEl.value = String(HOURLY_COST_DEFAULT);
    state.roi.hourlyCost = HOURLY_COST_DEFAULT;

    // Event listeners
    backButtonEl.addEventListener('click', () => goToStep(state.currentStep - 1));
    nextButtonEl.addEventListener('click', () => onNext());
    submitButtonEl.addEventListener('click', () => onSubmit());
    scheduleCallButtonEl.addEventListener('click', onScheduleCall);

    workflowsEl.addEventListener('input', () => {
      clearFieldError(errorWorkflowsEl);
    });
    hoursPerWeekEl.addEventListener('input', () => {
      clearFieldError(errorHoursPerWeekEl);
      syncHoursAndRecalculateROI();
    });
    vision90DayEl.addEventListener('input', () => {
      clearFieldError(errorVision90DayEl);
    });
    businessAndCustomerEl.addEventListener('input', () => {
      clearFieldError(errorBusinessAndCustomerEl);
    });
    hourlyCostEl.addEventListener('input', () => {
      clearFieldError(errorHourlyCostEl);
      syncHourlyCostAndRecalculateROI();
    });

    // Radio groups (role, company size, urgency)
    setupRadioGroup('role-group', 'role', errorRoleEl);
    setupRadioGroup('companySize-group', 'companySize', errorCompanySizeEl);
    setupRadioGroup('urgency-group', 'urgency', errorUrgencyEl);

    // Initial step view
    updateStepView();
    trackEvent('step_viewed', { stepIndex: state.currentStep });
  }

  function setupRadioGroup(groupId, stateKey, errorEl) {
    const groupEl = document.getElementById(groupId);
    if (!groupEl) return;

    groupEl.addEventListener('click', (event) => {
      const label = event.target.closest('.radio-option');
      if (!label) return;
      const value = label.getAttribute('data-value');
      if (!value) return;

      state.formValues[stateKey] = value;
      clearFieldError(errorEl);

      Array.from(groupEl.querySelectorAll('.radio-option')).forEach(opt => {
        opt.classList.toggle('selected', opt === label);
        const input = opt.querySelector('.radio-input');
        if (input) {
          input.checked = opt === label;
        }
      });
    });
  }

  // ---------- Step Navigation ----------
  function onNext() {
    if (!validateStep(state.currentStep, true)) {
      return;
    }
    goToStep(state.currentStep + 1);
  }

  function goToStep(step) {
    if (step < 1) step = 1;
    if (step > TOTAL_STEPS) step = TOTAL_STEPS;
    if (step === state.currentStep) return;

    state.currentStep = step;
    updateStepView();
    trackEvent('step_viewed', { stepIndex: state.currentStep });
  }

  function updateStepView() {
    const stepViews = document.querySelectorAll('.step-view');
    stepViews.forEach(view => {
      const id = view.id;
      const n = parseInt(id.split('-')[1], 10);
      view.classList.toggle('active', n === state.currentStep);
    });

    stepCounterCurrentEl.textContent = String(state.currentStep);

    const phase = STEP_PHASES[state.currentStep - 1] || '';
    stepPhaseLabelEl.textContent = phase;
    stepPhaseLabelEl.classList.toggle('step-phase-gold-dot', state.currentStep === 2);

    const progressPct = (state.currentStep - 1) / (TOTAL_STEPS - 1) * 100;
    progressBarFillEl.style.width = progressPct + '%';
    if (state.currentStep === 2) {
      progressBarFillEl.classList.remove('progress-fill-cyan');
      progressBarFillEl.classList.add('progress-fill-gold');
    } else {
      progressBarFillEl.classList.add('progress-fill-cyan');
      progressBarFillEl.classList.remove('progress-fill-gold');
    }

    // Buttons
    backButtonEl.style.visibility = state.currentStep === 1 ? 'hidden' : 'visible';
    nextButtonEl.style.display = state.currentStep === TOTAL_STEPS ? 'none' : 'inline-flex';
    submitButtonEl.style.display = state.currentStep === TOTAL_STEPS ? 'inline-flex' : 'none';

    globalErrorEl.textContent = '';

    // Ensure ROI is up to date when reaching Step 6
    if (state.currentStep === 6) {
      syncHoursAndRecalculateROI();
      syncHourlyCostAndRecalculateROI();
    }
  }

  // ---------- Validation ----------
  function clearFieldError(el) {
    if (el) el.textContent = '';
    globalErrorEl.textContent = '';
  }

  function validateStep(stepNumber, focusOnError) {
    let valid = true;
    let firstInvalidElement = null;

    if (stepNumber === 1) {
      const workflows = workflowsEl.value.trim();
      const hoursStr = hoursPerWeekEl.value.trim();
      let hoursVal = parseFloat(hoursStr);

      if (workflows.length < 10) {
        errorWorkflowsEl.textContent = 'Describe at least a few workflows (10+ characters).';
        valid = false;
        if (!firstInvalidElement) firstInvalidElement = workflowsEl;
      } else {
        errorWorkflowsEl.textContent = '';
      }

      if (!hoursStr) {
        errorHoursPerWeekEl.textContent = 'Enter an estimated number of hours per week.';
        valid = false;
        if (!firstInvalidElement) firstInvalidElement = hoursPerWeekEl;
      } else {
        if (isNaN(hoursVal) || hoursVal <= 0) {
          errorHoursPerWeekEl.textContent = 'Set hours per week greater than 0.';
          valid = false;
          if (!firstInvalidElement) firstInvalidElement = hoursPerWeekEl;
        } else {
          hoursVal = clamp(hoursVal, 0, HOURS_MAX);
          hoursPerWeekEl.value = String(hoursVal);
          errorHoursPerWeekEl.textContent = '';

          if (hoursVal > HOURS_REALISTIC_WARNING_THRESHOLD) {
            roiNoteMessageEl.textContent = 'This looks high. Double-check your estimate; we capped extreme values.';
          }
        }
      }
    } else if (stepNumber === 2) {
      const vision = vision90DayEl.value.trim();
      if (vision.length < 10) {
        errorVision90DayEl.textContent = 'Add more detail to your 90-day vision (10+ characters).';
        valid = false;
        if (!firstInvalidElement) firstInvalidElement = vision90DayEl;
      } else {
        errorVision90DayEl.textContent = '';
      }
    } else if (stepNumber === 3) {
      const bc = businessAndCustomerEl.value.trim();
      if (bc.length < 10) {
        errorBusinessAndCustomerEl.textContent = 'Describe your business and customers with a bit more detail.';
        valid = false;
        if (!firstInvalidElement) firstInvalidElement = businessAndCustomerEl;
      } else {
        errorBusinessAndCustomerEl.textContent = '';
      }
    } else if (stepNumber === 4) {
      if (!state.formValues.role) {
        errorRoleEl.textContent = 'Select the role that best describes you.';
        valid = false;
      } else {
        errorRoleEl.textContent = '';
      }
    } else if (stepNumber === 5) {
      if (!state.formValues.companySize) {
        errorCompanySizeEl.textContent = 'Select your current company size.';
        valid = false;
      } else {
        errorCompanySizeEl.textContent = '';
      }
    } else if (stepNumber === 6) {
      if (!state.formValues.urgency) {
        errorUrgencyEl.textContent = 'Select how urgent this is for you.';
        valid = false;
      } else {
        errorUrgencyEl.textContent = '';
      }

      const hourlyStr = hourlyCostEl.value.trim();
      let hourlyVal = parseFloat(hourlyStr);
      if (!hourlyStr || isNaN(hourlyVal)) {
        errorHourlyCostEl.textContent = 'Enter a valid hourly cost.';
        valid = false;
        if (!firstInvalidElement) firstInvalidElement = hourlyCostEl;
      } else {
        hourlyVal = clamp(hourlyVal, HOURLY_MIN, HOURLY_MAX);
        hourlyCostEl.value = String(hourlyVal);
        errorHourlyCostEl.textContent = '';
      }
    }

    if (!valid) {
      globalErrorEl.textContent = 'Please fix the highlighted fields to continue.';
      if (focusOnError && firstInvalidElement && typeof firstInvalidElement.focus === 'function') {
        firstInvalidElement.focus();
        firstInvalidElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    } else {
      globalErrorEl.textContent = '';
    }

    return valid;
  }

  function validateAllSteps() {
    let allValid = true;
    for (let step = 1; step <= TOTAL_STEPS; step++) {
      const isValid = validateStep(step, false);
      if (!isValid) {
        allValid = false;
        if (state.currentStep !== step) {
          state.currentStep = step;
          updateStepView();
        }
        validateStep(step, true);
        break;
      }
    }
    return allValid;
  }

  // ---------- Form Sync & ROI ----------
  function syncHoursAndRecalculateROI() {
    const hoursStr = hoursPerWeekEl.value.trim();
    let hoursVal = parseFloat(hoursStr);
    if (isNaN(hoursVal) || hoursVal < 0) hoursVal = 0;
    hoursVal = clamp(hoursVal, 0, HOURS_MAX);
    if (hoursStr !== '') {
      hoursPerWeekEl.value = String(hoursVal);
    }
    state.formValues.hoursPerWeek = hoursVal;
    recalculateROI();
  }

  function syncHourlyCostAndRecalculateROI() {
    const costStr = hourlyCostEl.value.trim();
    let costVal = parseFloat(costStr);
    if (isNaN(costVal) || costVal <= 0) costVal = HOURLY_COST_DEFAULT;
    costVal = clamp(costVal, HOURLY_MIN, HOURLY_MAX);
    hourlyCostEl.value = String(costVal);
    state.roi.hourlyCost = costVal;
    recalculateROI();
  }

  function recalculateROI() {
    const roi = computeROI(state.formValues.hoursPerWeek, state.roi.hourlyCost, AUTOMATION_RATE);
    state.roi = roi;
    updateROIDisplay();
  }

  function updateROIDisplay() {
    const roi = state.roi;
    if (roi.hoursPerWeek <= 0) {
      roiHoursPerWeekEl.textContent = '0';
      roiHourlyCostEl.textContent = formatCurrency(roi.hourlyCost).replace('$', '');
      roiMonthlyHoursEl.textContent = '–';
      roiMonthlyBurnEl.textContent = '–';
      roiSavingsEl.textContent = '–';
      roiNoteMessageEl.textContent = 'Set hours > 0 in Step 1 to see a concrete ROI preview.';
      return;
    }

    roiHoursPerWeekEl.textContent = formatNumber(roi.hoursPerWeek);
    roiHourlyCostEl.textContent = roi.hourlyCost.toLocaleString(undefined, { maximumFractionDigits: 0 });
    roiMonthlyHoursEl.textContent = formatNumber(Math.round(roi.monthlyHours));
    roiMonthlyBurnEl.textContent = formatCurrency(Math.round(roi.monthlyBurn));
    roiSavingsEl.textContent = formatCurrency(Math.round(roi.savings));

    if (roi.hoursPerWeek > HOURS_REALISTIC_WARNING_THRESHOLD) {
      roiNoteMessageEl.textContent = 'This looks high. We capped extreme values for a realistic preview.';
    } else {
      roiNoteMessageEl.textContent = 'This is a directional snapshot. Final mapping will use your full context.';
    }
  }

  // ---------- Submit ----------
  async function onSubmit() {
    if (state.submitted || state.submitting) {
      return;
    }
    const allValid = validateAllSteps();
    if (!allValid) return;

    state.submitting = true;
    submitButtonEl.disabled = true;
    submitButtonLabelEl.textContent = 'Sending...';
    globalErrorEl.textContent = '';

    // Sync all text fields to state (with truncation)
    state.formValues.workflows = truncateText(workflowsEl.value.trim(), 2000);
    state.formValues.vision90Day = truncateText(vision90DayEl.value.trim(), 2000);
    state.formValues.businessAndCustomer = truncateText(businessAndCustomerEl.value.trim(), 2000);

    syncHoursAndRecalculateROI();
    syncHourlyCostAndRecalculateROI();

    const submissionId = generateUUIDv4();
    state.submissionId = submissionId;

    const clientPayload = {
      ...state.formValues,
      roi: { ...state.roi }
    };

    const serverSubmission = {
      ...clientPayload,
      submissionId,
      timestamp: new Date().toISOString(),
      userAgent: navigator.userAgent || undefined,
      source: 'robots-pre-call-qualification'
    };

    try {
      // In a real architecture, this would be POST /api/submit and the backend would forward to N8N.
      const response = await fetch(N8N_WEBHOOK_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(serverSubmission)
      });

      if (!response.ok) {
        throw new Error('n8n_forward_failed');
      }

      state.submitted = true;
      trackEvent('submit_success', { submissionId });
      showCompletionScreen();
    } catch (err) {
      console.error('submit error', err);
      trackEvent('submit_failure', { errorCode: String(err && err.message || 'unknown') });
      globalErrorEl.textContent = 'Something went wrong sending your answers. Try again.';
      submitButtonEl.disabled = false;
      submitButtonLabelEl.textContent = 'Submit answers';
      state.submitting = false;
      return;
    }

    // Lock out further submissions on this session
    submitButtonEl.disabled = true;
    submitButtonLabelEl.textContent = 'Submitted';
    state.submitting = false;
  }

  function showCompletionScreen() {
    wizardContainerEl.style.display = 'none';
    completionScreenEl.classList.add('active');

    const roi = state.roi;
    completionAgentNameEl.textContent = state.formValues.agentName || 'Your AI employee';
    completionHoursPerWeekEl.textContent = formatNumber(roi.hoursPerWeek);
    completionMonthlyHoursEl.textContent = formatNumber(Math.round(roi.monthlyHours));
    completionMonthlyBurnEl.textContent = formatCurrency(Math.round(roi.monthlyBurn));
    completionSavingsEl.textContent = formatCurrency(Math.round(roi.savings));
    completionCompanySizeEl.textContent = mapCompanySizeLabel(state.formValues.companySize);
    completionUrgencyEl.textContent = mapUrgencyLabel(state.formValues.urgency);
  }

  function onScheduleCall() {
    trackEvent('schedule_call_clicked', { submissionId: state.submissionId });
    window.open(CALENDAR_URL, '_blank', 'noopener,noreferrer');
  }

  // ---------- Start ----------
  document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
