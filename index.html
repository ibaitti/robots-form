<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>ROBOTS [$] – AI Employee ROI Calculator</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React 18 UMD -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>

    <!-- Framer Motion UMD -->
    <script src="https://unpkg.com/framer-motion@10.18.0/dist/framer-motion.js"></script>

    <!-- Babel Standalone (TypeScript + JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body
    class="min-h-screen antialiased"
    style="background: linear-gradient(135deg, #F4F5FB 0%, #E7F0FF 100%);"
  >
    <div
      id="root"
      class="flex min-h-screen items-center justify-center px-4 py-10"
    ></div>

    <script type="text/babel" data-presets="typescript,react">
      const { useState, useMemo, useEffect, useRef } = React;

      // Framer Motion UMD globals (covering different versions)
      const motionLib: any =
        (window as any).Motion ||
        (window as any).framerMotion ||
        (window as any)['framer-motion'] ||
        {};

      const { motion, AnimatePresence } = motionLib;

      const WEBHOOK_URL = 'https://zerogpt.app.n8n.cloud/webhook-test/form-one';
      const BOOKING_URL = 'https://cal.com/ibaitti';

      const WEEKS_PER_MONTH = 4.33;
      const WEEKS_PER_YEAR = 52;
      const AUTOMATION_FACTOR = 0.7;

      type Answers = {
        workflows: string[];
        impactVision: string;
        offer: string;
        role: string;
        teamSize: string;
        timeline: string;
        hourlyCost: string;
        hoursPerWeek: string;
      };

      type RoiResult = {
        hourlyCost: number;
        hoursPerWeek: number;
        weeklyManual: number;
        monthlyManual: number;
        yearlyManual: number;
        monthlySavings: number;
        yearlySavings: number;
        hoursSavedYear: number;
      };

      const initialAnswers: Answers = {
        workflows: [],
        impactVision: '',
        offer: '',
        role: '',
        teamSize: '',
        timeline: '',
        hourlyCost: '',
        hoursPerWeek: '',
      };

      const stageLabels: Record<number, string> = {
        0: 'Welcome',
        1: 'Workflows',
        2: 'Impact',
        3: 'Offer & ICP',
        4: 'Role',
        5: 'Team size',
        6: 'ROI preview',
        7: 'Results',
      };

      const TOTAL_STEPS = 6;

      function getProgressStep(stageIndex: number): number {
        if (stageIndex <= 0) return 0;
        if (stageIndex >= 6) return 6;
        return stageIndex;
      }

      function computeRoi(hourlyCost: number, hoursPerWeek: number): RoiResult {
        const safeHourly =
          Number.isFinite(hourlyCost) && hourlyCost > 0 ? hourlyCost : 0;
        const safeHours =
          Number.isFinite(hoursPerWeek) && hoursPerWeek > 0 ? hoursPerWeek : 0;

        const weeklyManual = safeHourly * safeHours;
        const monthlyManual = weeklyManual * WEEKS_PER_MONTH;
        const yearlyManual = weeklyManual * WEEKS_PER_YEAR;

        const monthlySavings = monthlyManual * AUTOMATION_FACTOR;
        const yearlySavings = yearlyManual * AUTOMATION_FACTOR;

        const hoursSavedYear =
          safeHours * WEEKS_PER_YEAR * AUTOMATION_FACTOR;

        return {
          hourlyCost: safeHourly,
          hoursPerWeek: safeHours,
          weeklyManual,
          monthlyManual,
          yearlyManual,
          monthlySavings,
          yearlySavings,
          hoursSavedYear,
        };
      }

      function computeRoiFromAnswers(answers: Answers): RoiResult {
        const hourly = parseFloat(answers.hourlyCost || '0');
        const hours = parseFloat(answers.hoursPerWeek || '0');
        return computeRoi(hourly, hours);
      }

      function formatCurrency(amount: number): string {
        if (!Number.isFinite(amount) || amount <= 0) return '$0';
        try {
          return amount.toLocaleString('en-US', {
            style: 'currency',
            currency: 'USD',
            maximumFractionDigits: 0,
          });
        } catch {
          return `$${Math.round(amount)}`;
        }
      }

      function formatNumber(amount: number): string {
        if (!Number.isFinite(amount) || amount <= 0) return '0';
        try {
          return Math.round(amount).toLocaleString('en-US');
        } catch {
          return String(Math.round(amount));
        }
      }

      function sendWebhook(stageIndex: number, answers: Answers) {
        const roi = computeRoiFromAnswers(answers);
        const payload = {
          timestamp: new Date().toISOString(),
          stageIndex,
          stageLabel: stageLabels[stageIndex] || '',
          answers,
          roi,
          meta: {
            userAgent: navigator.userAgent,
            path: window.location.pathname,
            version: 'form-one-v1',
          },
        };

        try {
          fetch(WEBHOOK_URL, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(payload),
            keepalive: true,
          }).catch(() => {
            // fail silently
          });
        } catch {
          // fail silently
        }
      }

      type ButtonVariant =
        | 'primary'
        | 'secondary'
        | 'outline'
        | 'ghost'
        | 'link'
        | 'destructive';

      type ButtonProps = React.ButtonHTMLAttributes<HTMLButtonElement> & {
        variant?: ButtonVariant;
      };

      const Button: React.FC<ButtonProps> = ({
        variant = 'primary',
        className = '',
        ...props
      }) => {
        const base =
          'inline-flex items-center justify-center rounded-full px-4 py-2.5 text-sm font-medium transition-transform duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#06B6D4] focus-visible:ring-offset-2 focus-visible:ring-offset-slate-100 disabled:cursor-not-allowed disabled:opacity-60';
        const variants: Record<ButtonVariant, string> = {
          primary:
            'bg-[#1F4FDB] text-white shadow-md shadow-slate-900/20 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-slate-900/25',
          secondary:
            'bg-slate-900 text-white shadow-sm shadow-slate-900/20 hover:-translate-y-0.5 hover:bg-slate-800',
          outline:
            'border border-[#CBD5F5] bg-white/80 text-slate-800 hover:bg-slate-50 hover:-translate-y-0.5',
          ghost:
            'text-slate-700 hover:bg-slate-100 hover:-translate-y-0.5',
          link: 'text-[#1F4FDB] px-0 py-0 hover:underline',
          destructive:
            'bg-[#FF3B30] text-white shadow-md shadow-red-500/25 hover:bg-red-600 hover:-translate-y-0.5',
        };

        const classes = `${base} ${variants[variant]} ${className}`;

        return <button className={classes} {...props} />;
      };

      type InputWithTagsProps = {
        value: string[];
        onChange: (value: string[]) => void;
        placeholder?: string;
      };

      const InputWithTags: React.FC<InputWithTagsProps> = ({
        value,
        onChange,
        placeholder,
      }) => {
        const [input, setInput] = useState('');

        const handleKeyDown = (
          event: React.KeyboardEvent<HTMLInputElement>
        ) => {
          if (event.key === 'Enter') {
            event.preventDefault();
            const next = input.trim();
            if (!next) return;
            if (!value.includes(next)) {
              onChange([...value, next]);
            }
            setInput('');
          } else if (
            event.key === 'Backspace' &&
            !input &&
            value.length > 0
          ) {
            onChange(value.slice(0, -1));
          }
        };

        const removeTag = (tag: string) => {
          onChange(value.filter((item) => item !== tag));
        };

        return (
          <div className="rounded-2xl border border-[#E2E8F0] bg-white/70 px-3 py-2.5 shadow-inner shadow-slate-900/5 backdrop-blur">
            <div className="flex flex-wrap gap-2">
              {AnimatePresence ? (
                <AnimatePresence initial={false}>
                  {value.map((tag) => (
                    <motion.span
                      key={tag}
                      layout
                      initial={{ opacity: 0, scale: 0.8, y: 4 }}
                      animate={{ opacity: 1, scale: 1, y: 0 }}
                      exit={{ opacity: 0, scale: 0.8, y: -4 }}
                      transition={{ duration: 0.16 }}
                      className="inline-flex items-center gap-1 rounded-full bg-slate-900/5 px-2.5 py-1 text-xs font-medium text-slate-700"
                    >
                      <span>{tag}</span>
                      <button
                        type="button"
                        onClick={() => removeTag(tag)}
                        className="ml-0.5 inline-flex h-4 w-4 items-center justify-center rounded-full text-[10px] text-slate-500 hover:bg-slate-300/30"
                      >
                        ×
                      </button>
                    </motion.span>
                  ))}
                </AnimatePresence>
              ) : (
                value.map((tag) => (
                  <span
                    key={tag}
                    className="inline-flex items-center gap-1 rounded-full bg-slate-900/5 px-2.5 py-1 text-xs font-medium text-slate-700"
                  >
                    <span>{tag}</span>
                    <button
                      type="button"
                      onClick={() => removeTag(tag)}
                      className="ml-0.5 inline-flex h-4 w-4 items-center justify-center rounded-full text-[10px] text-slate-500 hover:bg-slate-300/30"
                    >
                      ×
                    </button>
                  </span>
                ))
              )}
              <input
                type="text"
                value={input}
                onChange={(e) => setInput(e.target.value)}
                onKeyDown={handleKeyDown}
                placeholder={
                  placeholder || 'Type a workflow and press Enter'
                }
                className="flex-1 min-w-[120px] border-none bg-transparent text-sm text-slate-800 placeholder:text-slate-400 focus:outline-none"
              />
            </div>
            <p className="mt-1 text-[11px] text-slate-400">
              Press <span className="font-semibold text-slate-500">Enter</span>{' '}
              to add each workflow.
            </p>
          </div>
        );
      };

      type SelectOption = {
        value: string;
        label: string;
        description?: string;
      };

      type SelectProps = {
        placeholder?: string;
        value: string;
        onChange: (value: string) => void;
        options: SelectOption[];
      };

      const Select: React.FC<SelectProps> = ({
        placeholder = 'Select…',
        value,
        onChange,
        options,
      }) => {
        const [open, setOpen] = useState(false);
        const ref = useRef<HTMLDivElement | null>(null);

        useEffect(() => {
          if (!open) return;
          const handleClick = (event: MouseEvent) => {
            if (!ref.current) return;
            if (!ref.current.contains(event.target as Node)) {
              setOpen(false);
            }
          };
          document.addEventListener('mousedown', handleClick);
          return () => {
            document.removeEventListener('mousedown', handleClick);
          };
        }, [open]);

        const selected = options.find(
          (option) => option.value === value
        );

        const toggleOpen = () => setOpen((prev) => !prev);

        const handleSelect = (val: string) => {
          onChange(val);
          setOpen(false);
        };

        return (
          <div className="relative" ref={ref}>
            <button
              type="button"
              onClick={toggleOpen}
              className="flex w-full items-center justify-between rounded-2xl border border-[#E2E8F0] bg-[#F9FAFB] px-3 py-2.5 text-left text-sm text-slate-800 shadow-inner shadow-slate-900/5 transition hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#06B6D4] focus-visible:ring-offset-2 focus-visible:ring-offset-slate-100"
            >
              <span className={selected ? '' : 'text-slate-400'}>
                {selected ? selected.label : placeholder}
              </span>
              <span className="ml-3 inline-flex h-5 w-5 items-center justify-center rounded-full border border-slate-300 text-[10px] text-slate-500">
                ▼
              </span>
            </button>
            {AnimatePresence ? (
              <AnimatePresence>
                {open && (
                  <motion.div
                    initial={{ opacity: 0, y: 4, scale: 0.98 }}
                    animate={{ opacity: 1, y: 0, scale: 1 }}
                    exit={{ opacity: 0, y: 4, scale: 0.98 }}
                    transition={{ duration: 0.18, ease: 'easeOut' }}
                    className="absolute z-20 mt-2 w-full overflow-hidden rounded-2xl border border-[#E2E8F0] bg-white/95 shadow-xl shadow-slate-900/10 backdrop-blur"
                  >
                    <ul className="max-h-64 overflow-y-auto py-1">
                      {options.map((option) => {
                        const active = option.value === value;
                        return (
                          <li key={option.value}>
                            <button
                              type="button"
                              onClick={() => handleSelect(option.value)}
                              className={`flex w-full flex-col items-start px-3 py-2 text-left text-sm transition hover:bg-slate-50 ${
                                active ? 'bg-slate-50' : ''
                              }`}
                            >
                              <div className="flex w-full items-center justify-between gap-2">
                                <span className="text-slate-800">
                                  {option.label}
                                </span>
                                {active && (
                                  <span className="rounded-full bg-[#06B6D4]/10 px-2 py-0.5 text-[11px] font-semibold text-[#06B6D4]">
                                    Selected
                                  </span>
                                )}
                              </div>
                              {option.description && (
                                <span className="mt-0.5 text-[11px] text-slate-500">
                                  {option.description}
                                </span>
                              )}
                            </button>
                          </li>
                        );
                      })}
                    </ul>
                  </motion.div>
                )}
              </AnimatePresence>
            ) : (
              open && (
                <div className="absolute z-20 mt-2 w-full overflow-hidden rounded-2xl border border-[#E2E8F0] bg-white/95 shadow-xl shadow-slate-900/10 backdrop-blur">
                  <ul className="max-h-64 overflow-y-auto py-1">
                    {options.map((option) => {
                      const active = option.value === value;
                      return (
                        <li key={option.value}>
                          <button
                            type="button"
                            onClick={() => handleSelect(option.value)}
                            className={`flex w-full flex-col items-start px-3 py-2 text-left text-sm transition hover:bg-slate-50 ${
                              active ? 'bg-slate-50' : ''
                            }`}
                          >
                            <div className="flex w-full items-center justify-between gap-2">
                              <span className="text-slate-800">
                                {option.label}
                              </span>
                              {active && (
                                <span className="rounded-full bg-[#06B6D4]/10 px-2 py-0.5 text-[11px] font-semibold text-[#06B6D4]">
                                  Selected
                                </span>
                              )}
                            </div>
                            {option.description && (
                              <span className="mt-0.5 text-[11px] text-slate-500">
                                {option.description}
                              </span>
                            )}
                          </button>
                        </li>
                      );
                    })}
                  </ul>
                </div>
              )
            )}
          </div>
        );
      };

      type InteractiveHoverButtonProps = {
        href: string;
        children: React.ReactNode;
      };

      const InteractiveHoverButton: React.FC<
        InteractiveHoverButtonProps
      > = ({ href, children }) => {
        return (
          <a href={href} target="_blank" rel="noreferrer">
            <button
              type="button"
              className="group relative inline-flex items-center overflow-hidden rounded-full bg-[#1F4FDB] px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-slate-900/30 transition-transform duration-150 hover:-translate-y-0.5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#06B6D4] focus-visible:ring-offset-2 focus-visible:ring-offset-slate-100"
            >
              <span className="pointer-events-none absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 opacity-0 transition-opacity duration-300 group-hover:opacity-100" />
              <span className="relative z-10 inline-flex items-center gap-2">
                {children}
                <span className="inline-flex h-5 w-5 items-center justify-center rounded-full bg-white/15 text-xs transition-transform duration-200 group-hover:translate-x-1">
                  →
                </span>
              </span>
            </button>
          </a>
        );
      };

      type HeaderProps = {
        currentStage: number;
      };

      const Header: React.FC<HeaderProps> = ({ currentStage }) => {
        const progressStep = getProgressStep(currentStage);
        const progressPercentage =
          progressStep <= 0
            ? 0
            : Math.min(100, (progressStep / TOTAL_STEPS) * 100);

        return (
          <header className="mb-6 space-y-4 md:mb-8">
            <div className="flex items-start justify-between gap-4">
              <div>
                <div className="inline-flex items-center gap-2 rounded-full border border-[#CBD5F5] bg-white/80 px-3 py-1 text-[11px] font-semibold tracking-[0.22em] text-slate-700 shadow-sm shadow-slate-900/5">
                  <span>ROBOTS [$]</span>
                  <span className="h-1 w-1 rounded-full bg-emerald-500" />
                  <span className="text-slate-400">QUALIFIER</span>
                </div>
                <h1 className="mt-3 text-xl font-semibold text-slate-900 md:text-2xl">
                  AI employees that work while you sleep
                </h1>
                <p className="mt-1 max-w-xl text-sm text-slate-500">
                  Map where a digital employee plugs into your business and
                  what it’s worth in saved time and payroll.
                </p>
              </div>
              <div className="hidden text-xs text-right text-slate-500 md:block">
                <p className="font-medium text-emerald-600">
                  Encrypted session
                </p>
                <p className="text-[11px] text-slate-400">
                  Answers stay between you and ROBOTS [$].
                </p>
              </div>
            </div>

            <div className="space-y-2">
              <div className="flex items-center justify-between text-[11px] text-slate-500">
                <span>
                  {progressStep === 0
                    ? 'Warm-up · Getting context'
                    : `Step ${progressStep} of ${TOTAL_STEPS}`}
                </span>
                <span className="font-medium text-slate-600">
                  {stageLabels[currentStage] || 'Qualification'}
                </span>
              </div>
              <div className="h-1.5 overflow-hidden rounded-full bg-slate-200/80">
                {motion ? (
                  <motion.div
                    initial={false}
                    animate={{ width: `${progressPercentage}%` }}
                    transition={{ duration: 0.25, ease: 'easeOut' }}
                    className="h-full rounded-full"
                    style={{ backgroundColor: '#06B6D4' }}
                  />
                ) : (
                  <div
                    className="h-full rounded-full"
                    style={{
                      width: `${progressPercentage}%`,
                      backgroundColor: '#06B6D4',
                    }}
                  />
                )}
              </div>
            </div>
          </header>
        );
      };

      type StageProps = {
        answers: Answers;
        onUpdate: (patch: Partial<Answers>) => void;
      };

      const StageIntro: React.FC<{
        onStart: () => void;
        onSkipToRoi: () => void;
      }> = ({ onStart, onSkipToRoi }) => {
        return (
          <div className="space-y-5">
            <h2 className="text-lg font-semibold text-slate-900 md:text-xl">
              In 6 questions, we’ll pinpoint where an AI employee fits in your
              business.
            </h2>
            <p className="text-sm text-slate-600">
              We’ll map the workflows it can own, quantify the time it frees
              up, and calculate how fast it pays for itself.
            </p>
            <ul className="space-y-2 text-sm text-slate-600">
              <li className="flex items-start gap-2">
                <span className="mt-1 h-1.5 w-1.5 rounded-full bg-emerald-500" />
                <span>
                  Estimate payroll savings based on your real numbers.
                </span>
              </li>
              <li className="flex items-start gap-2">
                <span className="mt-1 h-1.5 w-1.5 rounded-full bg-sky-500" />
                <span>
                  See where a digital employee plugs into your current
                  workflows.
                </span>
              </li>
              <li className="flex items-start gap-2">
                <span className="mt-1 h-1.5 w-1.5 rounded-full bg-slate-400" />
                <span>
                  No emails, no spam. Just an instant ROI snapshot.
                </span>
              </li>
            </ul>
            <div className="flex flex-col gap-3 pt-2 sm:flex-row sm:items-center">
              <Button
                onClick={onStart}
                variant="primary"
                className="w-full sm:w-auto"
              >
                Start the 6-question scan
              </Button>
              <Button
                onClick={onSkipToRoi}
                variant="ghost"
                className="w-full text-sm text-slate-600 sm:w-auto"
              >
                Skip to ROI only
              </Button>
            </div>
          </div>
        );
      };

      const StageWorkflows: React.FC<StageProps> = ({
        answers,
        onUpdate,
      }) => {
        return (
          <div className="space-y-4">
            <h2 className="text-lg font-semibold text-slate-900">
              If you could deploy a digital employee to automate 3–5 repetitive
              workflows, where would you start?
            </h2>
            <p className="text-sm text-slate-600">
              Think about tasks that happen every day or every week and follow
              a clear set of rules. For example: lead qualification, outbound
              messages, reporting, follow-up, data entry.
            </p>
            <InputWithTags
              value={answers.workflows}
              onChange={(workflows) => onUpdate({ workflows })}
              placeholder="e.g. Lead qualification, demo follow-up, weekly reporting"
            />
          </div>
        );
      };

      const StageImpact: React.FC<StageProps> = ({
        answers,
        onUpdate,
      }) => {
        return (
          <div className="space-y-4">
            <h2 className="text-lg font-semibold text-slate-900">
              Ninety days from today, what is the single most impactful change
              you want this AI employee to create?
            </h2>
            <p className="text-sm text-slate-600">
              Describe the business outcome, not the feature. For example:
              shorter response times, higher show-up rates, faster sales
              cycles, more qualified opportunities.
            </p>
            <textarea
              rows={4}
              value={answers.impactVision}
              onChange={(e) =>
                onUpdate({ impactVision: e.target.value })
              }
              className="mt-1 w-full rounded-2xl border border-[#E2E8F0] bg-[#F9FAFB] px-3 py-2.5 text-sm text-slate-800 shadow-inner shadow-slate-900/5 placeholder:text-slate-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#06B6D4] focus-visible:ring-offset-2 focus-visible:ring-offset-slate-100"
              placeholder="Example: Within 90 days, I want every inbound lead to be contacted in under 2 minutes with a tailored sequence that moves them to a booked call."
            />
          </div>
        );
      };

      const StageOffer: React.FC<StageProps> = ({
        answers,
        onUpdate,
      }) => {
        return (
          <div className="space-y-4">
            <h2 className="text-lg font-semibold text-slate-900">
              What does your company sell, and who is your ideal customer?
            </h2>
            <p className="text-sm text-slate-600">
              This helps us shape what your AI employee actually says and
              does. Include your primary offer, price points, and the type of
              customer you most want more of.
            </p>
            <textarea
              rows={4}
              value={answers.offer}
              onChange={(e) => onUpdate({ offer: e.target.value })}
              className="mt-1 w-full rounded-2xl border border-[#E2E8F0] bg-[#F9FAFB] px-3 py-2.5 text-sm text-slate-800 shadow-inner shadow-slate-900/5 placeholder:text-slate-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#06B6D4] focus-visible:ring-offset-2 focus-visible:ring-offset-slate-100"
              placeholder="Example: We sell a performance-based outbound service to B2B SaaS founders in the US/UK doing $1–10M ARR."
            />
          </div>
        );
      };

      const StageRole: React.FC<StageProps> = ({
        answers,
        onUpdate,
      }) => {
        const options: SelectOption[] = [
          {
            value: 'founder',
            label: 'Founder / Owner',
            description:
              'You own the business and drive strategic decisions.',
          },
          {
            value: 'c-level',
            label: 'C-Level / VP',
            description:
              'Executive role with P&L or departmental ownership.',
          },
          {
            value: 'ops',
            label: 'Operations / Systems',
            description:
              'You design processes, systems, and internal tooling.',
          },
          {
            value: 'marketing-sales',
            label: 'Marketing / Sales',
            description:
              'You own pipeline, campaigns, or revenue targets.',
          },
          {
            value: 'other',
            label: 'Other',
            description:
              'You influence buying decisions but don’t fit the above.',
          },
        ];

        return (
          <div className="space-y-4">
            <h2 className="text-lg font-semibold text-slate-900">
              Which best describes your role in the company?
            </h2>
            <p className="text-sm text-slate-600">
              This helps us understand how close you are to the workflows
              this AI employee will touch.
            </p>
            <Select
              value={answers.role}
              onChange={(role) => onUpdate({ role })}
              options={options}
              placeholder="Select the role that fits you best"
            />
          </div>
        );
      };

      const StageTeamSize: React.FC<StageProps> = ({
        answers,
        onUpdate,
      }) => {
        const options: SelectOption[] = [
          {
            value: '1',
            label: 'Just me (solo)',
            description: 'You are the business today.',
          },
          {
            value: '2-10',
            label: '2–10 employees',
            description: 'Small team wearing multiple hats.',
          },
          {
            value: '11-50',
            label: '11–50 employees',
            description: 'Growing team with emerging structure.',
          },
          {
            value: '51-200',
            label: '51–200 employees',
            description: 'Established company with defined departments.',
          },
          {
            value: '201-1000',
            label: '201–1000 employees',
            description: 'Scaling organization with complex workflows.',
          },
          {
            value: '1000+',
            label: '1000+ employees',
            description: 'Enterprise scale operations.',
          },
        ];

        return (
          <div className="space-y-4">
            <h2 className="text-lg font-semibold text-slate-900">
              How many people are currently on your team?
            </h2>
            <p className="text-sm text-slate-600">
              Team size helps us calibrate what a single AI employee can
              take off your plate.
            </p>
            <Select
              value={answers.teamSize}
              onChange={(teamSize) => onUpdate({ teamSize })}
              options={options}
              placeholder="Select your company size"
            />
          </div>
        );
      };

      const StageRoi: React.FC<StageProps> = ({
        answers,
        onUpdate,
      }) => {
        const roi = computeRoiFromAnswers(answers);
        const hasValidInputs =
          roi.hourlyCost > 0 && roi.hoursPerWeek > 0;

        const timelineOptions: SelectOption[] = [
          {
            value: 'exploring',
            label: 'Gathering info',
            description:
              'Just exploring what’s possible with AI employees.',
          },
          {
            value: 'planning',
            label: 'Planning deployment',
            description:
              'Expecting to implement in the next 90 days.',
          },
          {
            value: 'critical-60',
            label: 'Critical 60-day priority',
            description:
              'This is a near-term priority for the next 60 days.',
          },
        ];

        return (
          <div className="space-y-5">
            <div className="space-y-3">
              <h2 className="text-lg font-semibold text-slate-900">
                What’s your timeline and what does this work cost you right
                now?
              </h2>
              <p className="text-sm text-slate-600">
                We’ll use your real numbers to estimate how much payroll a
                single AI employee can replace or free up.
              </p>
            </div>

            <div className="grid gap-4 md:grid-cols-2">
              <div className="space-y-2">
                <p className="text-xs font-medium uppercase tracking-wide text-slate-500">
                  Timeline
                </p>
                <Select
                  value={answers.timeline}
                  onChange={(timeline) => onUpdate({ timeline })}
                  options={timelineOptions}
                  placeholder="When do you want this live?"
                />
              </div>

              <div className="space-y-2">
                <p className="text-xs font-medium uppercase tracking-wide text-slate-500">
                  Current manual workload
                </p>
                <div className="grid gap-2 sm:grid-cols-2">
                  <div className="space-y-1">
                    <label className="text-[11px] font-medium text-slate-500">
                      Blended hourly cost
                    </label>
                    <div className="relative">
                      <span className="pointer-events-none absolute inset-y-0 left-3 flex items-center text-xs text-slate-400">
                        $
                      </span>
                      <input
                        type="number"
                        min="0"
                        inputMode="decimal"
                        value={answers.hourlyCost}
                        onChange={(e) =>
                          onUpdate({ hourlyCost: e.target.value })
                        }
                        className="w-full rounded-2xl border border-[#E2E8F0] bg-[#F9FAFB] py-2.5 pl-6 pr-3 text-sm text-slate-800 shadow-inner shadow-slate-900/5 placeholder:text-slate-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#06B6D4] focus-visible:ring-offset-2 focus-visible:ring-offset-slate-100"
                        placeholder="e.g. 40"
                      />
                    </div>
                    <p className="text-[11px] text-slate-400">
                      Include salary, taxes, tools &amp; overhead.
                    </p>
                  </div>

                  <div className="space-y-1">
                    <label className="text-[11px] font-medium text-slate-500">
                      Hours per week on these tasks
                    </label>
                    <input
                      type="number"
                      min="0"
                      inputMode="decimal"
                      value={answers.hoursPerWeek}
                      onChange={(e) =>
                        onUpdate({ hoursPerWeek: e.target.value })
                      }
                      className="w-full rounded-2xl border border-[#E2E8F0] bg-[#F9FAFB] px-3 py-2.5 text-sm text-slate-800 shadow-inner shadow-slate-900/5 placeholder:text-slate-400 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#06B6D4] focus-visible:ring-offset-2 focus-visible:ring-offset-slate-100"
                      placeholder="e.g. 25"
                    />
                    <p className="text-[11px] text-slate-400">
                      Across you and your team for the workflows above.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <div className="mt-1 rounded-2xl border border-dashed border-[#CBD5F5] bg-white/70 px-3 py-3 shadow-inner shadow-slate-900/5">
              {hasValidInputs ? (
                <div className="space-y-3">
                  <div className="flex items-center justify-between gap-2 text-xs text-slate-500">
                    <span>
                      Live preview · Based on your inputs so far
                    </span>
                    <span className="inline-flex items-center gap-1 rounded-full bg-emerald-50 px-2 py-1 text-[11px] font-medium text-emerald-700">
                      <span className="h-1.5 w-1.5 rounded-full bg-emerald-500" />
                      <span>Automation factor: 70%</span>
                    </span>
                  </div>
                  <div className="grid gap-3 md:grid-cols-3">
                    <div className="rounded-xl bg-slate-50 px-3 py-2.5 text-xs">
                      <p className="text-[11px] font-medium text-slate-500">
                        Monthly savings
                      </p>
                      <p className="mt-1 text-base font-semibold text-slate-900">
                        {formatCurrency(roi.monthlySavings)}
                      </p>
                      <p className="mt-0.5 text-[11px] text-slate-500">
                        vs. manual completion of these tasks.
                      </p>
                    </div>
                    <div className="rounded-xl bg-slate-50 px-3 py-2.5 text-xs">
                      <p className="text-[11px] font-medium text-slate-500">
                        Yearly savings
                      </p>
                      <p className="mt-1 text-base font-semibold text-slate-900">
                        {formatCurrency(roi.yearlySavings)}
                      </p>
                      <p className="mt-0.5 text-[11px] text-slate-500">
                        Assuming consistent workload across 12 months.
                      </p>
                    </div>
                    <div className="rounded-xl bg-slate-50 px-3 py-2.5 text-xs">
                      <p className="text-[11px] font-medium text-slate-500">
                        Hours reclaimed / year
                      </p>
                      <p className="mt-1 text-base font-semibold text-slate-900">
                        {formatNumber(roi.hoursSavedYear)} hrs
                      </p>
                      <p className="mt-0.5 text-[11px] text-slate-500">
                        Time your team can reallocate to higher leverage
                        work.
                      </p>
                    </div>
                  </div>
                </div>
              ) : (
                <div className="flex items-center justify-between gap-3 text-xs text-slate-500">
                  <span>
                    Enter your hourly cost and weekly hours to see a live
                    savings preview.
                  </span>
                  <span className="hidden rounded-full bg-slate-100 px-2.5 py-1 font-medium text-slate-600 sm:inline">
                    Real-time ROI, no email required.
                  </span>
                </div>
              )}
            </div>
          </div>
        );
      };

      const StageResults: React.FC<{ answers: Answers }> = ({
        answers,
      }) => {
        const roi = computeRoiFromAnswers(answers);

        return (
          <div className="space-y-6">
            <div className="space-y-3">
              <h2 className="text-lg font-semibold text-slate-900 md:text-xl">
                Here’s what a ROBOTS [$] AI employee looks like in your
                numbers.
              </h2>
              <p className="text-sm text-slate-600">
                Based on your inputs, automating these workflows with a digital
                employee could unlock the following capacity and savings.
              </p>
            </div>

            <div className="grid gap-5 md:grid-cols-[minmax(0,1.4fr),minmax(0,1fr)]">
              <div className="relative overflow-hidden rounded-2xl border border-[#CBD5F5] bg-gradient-to-br from-white/90 via-white/80 to-slate-50/80 p-5 shadow-lg shadow-slate-900/10">
                <div className="pointer-events-none absolute -top-10 -right-16 h-40 w-40 rounded-full bg-[#1F4FDB]/10 blur-3xl" />
                <div className="pointer-events-none absolute -bottom-16 -left-10 h-40 w-40 rounded-full bg-[#06B6D4]/10 blur-3xl" />

                <p className="text-xs font-medium uppercase tracking-wide text-slate-500">
                  Projected yearly impact
                </p>
                <div className="mt-3 flex flex-wrap items-baseline gap-x-3 gap-y-2">
                  <div>
                    <p className="text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                      Payroll savings
                    </p>
                    <p className="text-2xl font-semibold text-slate-900 md:text-3xl">
                      {formatCurrency(roi.yearlySavings)}
                    </p>
                  </div>
                  <div className="h-9 w-px bg-slate-200/80" />
                  <div>
                    <p className="text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                      Hours reclaimed
                    </p>
                    <p className="text-xl font-semibold text-slate-900 md:text-2xl">
                      {formatNumber(roi.hoursSavedYear)} hrs / year
                    </p>
                  </div>
                </div>

                <p className="mt-2 text-xs text-slate-500">
                  Assumes automating ~70% of the workload you described across{' '}
                  {WEEKS_PER_YEAR} weeks per year.
                </p>

                <div className="mt-4 grid gap-3 text-xs md:grid-cols-2">
                  <div className="rounded-xl border border-slate-200 bg-white/80 p-3">
                    <p className="text-[11px] font-semibold uppercase tracking-wide text-slate-500">
                      Manual status quo
                    </p>
                    <div className="mt-2 space-y-1.5">
                      <div className="flex items-center justify-between">
                        <span className="text-slate-500">
                          Monthly cost
                        </span>
                        <span className="font-medium text-slate-900">
                          {formatCurrency(roi.monthlyManual)}
                        </span>
                      </div>
                      <div className="flex items-center justify-between">
                        <span className="text-slate-500">
                          Yearly cost
                        </span>
                        <span className="font-medium text-slate-900">
                          {formatCurrency(roi.yearlyManual)}
                        </span>
                      </div>
                      <div className="flex items-center justify-between">
                        <span className="text-slate-500">
                          Weekly spend
                        </span>
                        <span className="font-medium text-slate-900">
                          {formatCurrency(roi.weeklyManual)}
                        </span>
                      </div>
                    </div>
                  </div>
                  <div className="rounded-xl border border-emerald-200 bg-emerald-50/70 p-3">
                    <p className="text-[11px] font-semibold uppercase tracking-wide text-emerald-700">
                      With ROBOTS [$] automation
                    </p>
                    <div className="mt-2 space-y-1.5">
                      <div className="flex items-center justify-between">
                        <span className="text-slate-600">
                          Projected monthly savings
                        </span>
                        <span className="font-semibold text-emerald-700">
                          {formatCurrency(roi.monthlySavings)}
                        </span>
                      </div>
                      <div className="flex items-center justify-between">
                        <span className="text-slate-600">
                          Projected yearly savings
                        </span>
                        <span className="font-semibold text-emerald-700">
                          {formatCurrency(roi.yearlySavings)}
                        </span>
                      </div>
                      <div className="flex items-center justify-between">
                        <span className="text-slate-600">
                          Time freed for higher leverage work
                        </span>
                        <span className="font-semibold text-emerald-700">
                          {formatNumber(roi.hoursSavedYear)} hrs
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div className="flex flex-col justify-between gap-4 rounded-2xl border border-[#E2E8F0] bg-white/85 p-4 shadow-md shadow-slate-900/10">
                <div className="space-y-3">
                  <p className="text-xs font-medium uppercase tracking-wide text-slate-500">
                    Next step
                  </p>
                  <p className="text-sm text-slate-600">
                    We plug this into your actual workflows (CRM, ad
                    platforms, messaging, calendar) and deploy an AI employee
                    that runs them end-to-end.
                  </p>
                  <ul className="space-y-1.5 text-xs text-slate-600">
                    <li className="flex items-start gap-2">
                      <span className="mt-1 h-1.5 w-1.5 rounded-full bg-[#06B6D4]" />
                      <span>
                        Connects to tools like Salesforce, HubSpot, Pipedrive
                        and Meta.
                      </span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="mt-1 h-1.5 w-1.5 rounded-full bg-slate-500" />
                      <span>
                        Handles outreach, follow-up, routing and scheduling
                        automatically.
                      </span>
                    </li>
                    <li className="flex items-start gap-2">
                      <span className="mt-1 h-1.5 w-1.5 rounded-full bg-emerald-500" />
                      <span>
                        Operates 24/7 with deterministic logic you can audit
                        and control.
                      </span>
                    </li>
                  </ul>
                </div>

                <div className="space-y-3">
                  <InteractiveHoverButton href={BOOKING_URL}>
                    Book a call to deploy this
                  </InteractiveHoverButton>
                  <p className="text-[11px] text-slate-500">
                    On the call we’ll validate these numbers against your
                    actual tools and design a concrete deployment plan.
                  </p>
                </div>
              </div>
            </div>
          </div>
        );
      };

      function validateStage(
        stageIndex: number,
        answers: Answers
      ): string | null {
        if (stageIndex === 1) {
          if (!answers.workflows || answers.workflows.length === 0) {
            return 'Add at least one workflow you’d like to automate.';
          }
        } else if (stageIndex === 2) {
          if (!answers.impactVision.trim()) {
            return 'Describe the single most impactful change you want in the next 90 days.';
          }
        } else if (stageIndex === 3) {
          if (!answers.offer.trim()) {
            return 'Describe what you sell and who you sell it to.';
          }
        } else if (stageIndex === 4) {
          if (!answers.role) {
            return 'Select the role that best describes you.';
          }
        } else if (stageIndex === 5) {
          if (!answers.teamSize) {
            return 'Select your current team size.';
          }
        } else if (stageIndex === 6) {
          if (!answers.timeline) {
            return 'Select your implementation timeline.';
          }
          const hourly = parseFloat(answers.hourlyCost || '0');
          const hours = parseFloat(answers.hoursPerWeek || '0');
          if (!Number.isFinite(hourly) || hourly <= 0) {
            return 'Enter a valid blended hourly cost.';
          }
          if (!Number.isFinite(hours) || hours <= 0) {
            return 'Enter the weekly hours spent on these workflows.';
          }
        }

        return null;
      }

      const App: React.FC = () => {
        const [answers, setAnswers] =
          useState<Answers>(initialAnswers);
        const [currentStage, setCurrentStage] = useState<number>(0);
        const [validationError, setValidationError] = useState<
          string | null
        >(null);

        const roi = useMemo(
          () => computeRoiFromAnswers(answers),
          [answers.hourlyCost, answers.hoursPerWeek]
        );

        const updateAnswers = (patch: Partial<Answers>) => {
          setAnswers((prev) => ({ ...prev, ...patch }));
          if (validationError) setValidationError(null);
        };

        const goToStage = (nextStage: number) => {
          if (nextStage === currentStage) return;
          sendWebhook(nextStage, answers);
          setCurrentStage(nextStage);
          setValidationError(null);
        };

        const handleNext = () => {
          if (currentStage === 0) {
            goToStage(1);
            return;
          }

          const error = validateStage(currentStage, answers);
          if (error) {
            setValidationError(error);
            return;
          }

          if (currentStage === 6) {
            goToStage(7);
          } else if (currentStage < 7) {
            goToStage(currentStage + 1);
          }
        };

        const handleBack = () => {
          if (currentStage === 0) return;
          if (currentStage === 7) {
            goToStage(6);
            return;
          }
          goToStage(Math.max(0, currentStage - 1));
        };

        const handleAdjustAssumptions = () => {
          goToStage(6);
        };

        const showBackButton = currentStage > 0;

        return (
          <div className="w-full max-w-2xl rounded-2xl border border-[#E2E8F0] bg-white/80 p-5 shadow-xl shadow-slate-900/10 backdrop-blur-xl md:p-7">
            <Header currentStage={currentStage} />

            <div className="min-h-[260px]">
              {motion && AnimatePresence ? (
                <AnimatePresence mode="wait">
                  <motion.div
                    key={currentStage}
                    initial={{
                      opacity: 0,
                      y: 12,
                      scale: 0.97,
                    }}
                    animate={{
                      opacity: 1,
                      y: 0,
                      scale: 1,
                    }}
                    exit={{
                      opacity: 0,
                      y: -12,
                      scale: 0.97,
                    }}
                    transition={{ duration: 0.22, ease: 'easeOut' }}
                    className="space-y-4"
                  >
                    {currentStage === 0 && (
                      <StageIntro
                        onStart={() => goToStage(1)}
                        onSkipToRoi={() => goToStage(6)}
                      />
                    )}
                    {currentStage === 1 && (
                      <StageWorkflows
                        answers={answers}
                        onUpdate={updateAnswers}
                      />
                    )}
                    {currentStage === 2 && (
                      <StageImpact
                        answers={answers}
                        onUpdate={updateAnswers}
                      />
                    )}
                    {currentStage === 3 && (
                      <StageOffer
                        answers={answers}
                        onUpdate={updateAnswers}
                      />
                    )}
                    {currentStage === 4 && (
                      <StageRole
                        answers={answers}
                        onUpdate={updateAnswers}
                      />
                    )}
                    {currentStage === 5 && (
                      <StageTeamSize
                        answers={answers}
                        onUpdate={updateAnswers}
                      />
                    )}
                    {currentStage === 6 && (
                      <StageRoi
                        answers={answers}
                        onUpdate={updateAnswers}
                      />
                    )}
                    {currentStage === 7 && (
                      <StageResults answers={answers} />
                    )}
                  </motion.div>
                </AnimatePresence>
              ) : (
                <div className="space-y-4">
                  {currentStage === 0 && (
                    <StageIntro
                      onStart={() => goToStage(1)}
                      onSkipToRoi={() => goToStage(6)}
                    />
                  )}
                  {currentStage === 1 && (
                    <StageWorkflows
                      answers={answers}
                      onUpdate={updateAnswers}
                    />
                  )}
                  {currentStage === 2 && (
                    <StageImpact
                      answers={answers}
                      onUpdate={updateAnswers}
                    />
                  )}
                  {currentStage === 3 && (
                    <StageOffer
                      answers={answers}
                      onUpdate={updateAnswers}
                    />
                  )}
                  {currentStage === 4 && (
                    <StageRole
                      answers={answers}
                      onUpdate={updateAnswers}
                    />
                  )}
                  {currentStage === 5 && (
                    <StageTeamSize
                      answers={answers}
                      onUpdate={updateAnswers}
                    />
                  )}
                  {currentStage === 6 && (
                    <StageRoi
                      answers={answers}
                      onUpdate={updateAnswers}
                    />
                  )}
                  {currentStage === 7 && (
                    <StageResults answers={answers} />
                  )}
                </div>
              )}
            </div>

            {validationError && (
              <div className="mt-4 rounded-xl border border-[#FF3B30]/40 bg-[#FF3B30]/5 px-3 py-2.5 text-xs text-[#FF3B30]">
                {validationError}
              </div>
            )}

            <div className="mt-5 flex items-center justify-between gap-3">
              <div className="flex items-center gap-2 text-[11px] text-slate-500">
                <span className="inline-flex h-6 w-6 items-center justify-center rounded-full border border-slate-200 bg-slate-50 text-[10px] font-semibold text-slate-600">
                  ROI
                </span>
                <span>
                  Projected yearly savings:{' '}
                  <span className="font-semibold text-slate-800">
                    {formatCurrency(roi.yearlySavings)}
                  </span>
                </span>
              </div>
              <div className="flex items-center gap-2">
                {currentStage === 7 && (
                  <Button
                    type="button"
                    variant="outline"
                    className="hidden text-xs sm:inline-flex"
                    onClick={handleAdjustAssumptions}
                  >
                    Adjust assumptions
                  </Button>
                )}
                {showBackButton && (
                  <Button
                    type="button"
                    variant="ghost"
                    className="text-xs text-slate-600"
                    onClick={handleBack}
                  >
                    Back
                  </Button>
                )}
                {currentStage < 7 && (
                  <Button
                    type="button"
                    variant="primary"
                    className="text-xs sm:text-sm"
                    onClick={handleNext}
                  >
                    {currentStage === 6
                      ? 'Calculate my savings'
                      : 'Next'}
                  </Button>
                )}
              </div>
            </div>

            <footer className="mt-6 border-t border-slate-200/70 pt-4">
              <div className="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
                <div className="space-y-1 text-[11px] text-slate-500">
                  <p>
                    End-to-end encryption. Your data is processed securely
                    and never sold.
                  </p>
                  <p>© 2025 ROBOTS [$]. All rights reserved.</p>
                </div>
                <div className="flex flex-wrap gap-2 text-[10px] font-medium text-slate-500">
                  {[
                    'Salesforce',
                    'HubSpot',
                    'Pipedrive',
                    'Meta',
                    'WhatsApp',
                    'Google Workspace',
                    'Apple Business',
                  ].map((name) => (
                    <span
                      key={name}
                      className="rounded-full border border-slate-300 bg-white/70 px-2.5 py-1 shadow-sm shadow-slate-900/5"
                    >
                      {name}
                    </span>
                  ))}
                </div>
              </div>
            </footer>
          </div>
        );
      };

      const rootElement = document.getElementById('root');
      if (rootElement) {
        const root = ReactDOM.createRoot(rootElement);
        root.render(<App />);
      }
    </script>
  </body>
</html>
