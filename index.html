<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Digital Employee Diagnostic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Space+Grotesk:wght@500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'SF Pro Text', 'Work Sans', system-ui, sans-serif;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Space Grotesk', 'Satoshi', system-ui, sans-serif;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.24);
            backdrop-filter: blur(18px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 40px rgba(34, 211, 238, 0.15);
        }
        .star {
            position: absolute;
            border-radius: 50%;
            animation: drift 15s infinite ease-in-out;
        }
        @keyframes drift {
            0%, 100% { transform: translate(0, 0); opacity: 0.3; }
            50% { transform: translate(10px, -10px); opacity: 0.6; }
        }
        .btn-primary {
            background: #2563EB;
            border: 1px solid rgba(34, 211, 238, 0.7);
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.35);
            transition: all 0.15s;
        }
        .btn-primary:hover:not(:disabled) {
            filter: brightness(1.1);
        }
        .btn-primary:active:not(:disabled) {
            transform: scale(0.95);
        }
        .btn-primary:disabled {
            opacity: 0.6;
            box-shadow: none;
            cursor: not-allowed;
        }
        .radio-option {
            transition: all 0.15s;
        }
        .radio-option:hover {
            border-color: rgba(34, 211, 238, 0.5);
        }
        .radio-option.selected {
            background: rgba(37, 99, 235, 0.05);
            border-color: #22D3EE;
        }
        .fade-enter {
            opacity: 0;
            transform: translateX(20px);
        }
        .fade-exit {
            opacity: 0;
            transform: translateX(-20px);
        }
        .transition-content {
            transition: opacity 0.2s, transform 0.2s;
        }
    </style>
</head>
<body class="min-h-screen" style="background: linear-gradient(to bottom, #F5F7FF, #E0ECFF);">
    <div id="starfield" style="position: fixed; top: 0; left: 0; right: 0; height: 40vh; overflow: hidden; pointer-events: none;"></div>

    <div id="app" class="relative z-10 min-h-screen flex items-center justify-center px-4 py-12"></div>

    <script>
        const starfield = document.getElementById('starfield');
        for (let i = 0; i < 60; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.width = Math.random() > 0.5 ? '2px' : '1px';
            star.style.height = star.style.width;
            star.style.backgroundColor = Math.random() > 0.5 ? 'rgba(210, 230, 255, 0.25)' : 'rgba(255, 255, 255, 0.35)';
            star.style.animationDelay = Math.random() * 5 + 's';
            star.style.animationDuration = (Math.random() * 8 + 12) + 's';
            starfield.appendChild(star);
        }

        const state = {
            currentStep: 1,
            totalSteps: 6,
            isSubmitting: false,
            isComplete: false,
            errors: {},
            formData: {
                workflows: '',
                workflowHoursPerWeek: 10,
                futureState: '',
                offerAndICP: '',
                role: '',
                companySize: '',
                urgency: '',
                avgHourlyRate: 50
            },
            roiMetrics: null
        };

        function calculateROI(data) {
            const hoursPerMonth = data.workflowHoursPerWeek * 4.33;
            const costPerMonth = hoursPerMonth * data.avgHourlyRate;
            const automationPercentage = 0.7;
            const savingsPerMonth = costPerMonth * automationPercentage;

            return {
                estimatedHoursPerMonth: Math.round(hoursPerMonth),
                estimatedCostPerMonth: Math.round(costPerMonth),
                estimatedSavingsPerMonth: Math.round(savingsPerMonth),
                assumptions: {
                    hourlyRate: data.avgHourlyRate,
                    automationPercentage: automationPercentage
                }
            };
        }

        function validateStep(step) {
            const errors = {};

            switch (step) {
                case 1:
                    if (!state.formData.workflows.trim()) {
                        errors.workflows = 'Please describe at least one workflow.';
                    }
                    break;
                case 2:
                    if (!state.formData.futureState.trim()) {
                        errors.futureState = 'Please share your 90-day vision.';
                    }
                    break;
                case 3:
                    if (!state.formData.offerAndICP.trim()) {
                        errors.offerAndICP = 'Please describe your offer and ideal customer.';
                    }
                    break;
                case 4:
                    if (!state.formData.role) {
                        errors.role = 'Please select your role.';
                    }
                    break;
                case 5:
                    if (!state.formData.companySize) {
                        errors.companySize = 'Please select your company size.';
                    }
                    break;
                case 6:
                    if (!state.formData.urgency) {
                        errors.urgency = 'Please select your urgency level.';
                    }
                    break;
            }

            state.errors = errors;
            return Object.keys(errors).length === 0;
        }

        function handleNext() {
            if (validateStep(state.currentStep)) {
                if (state.currentStep === 5) {
                    state.roiMetrics = calculateROI(state.formData);
                }
                state.currentStep = Math.min(state.currentStep + 1, state.totalSteps);
                render();
            } else {
                render();
            }
        }

        function handleBack() {
            state.currentStep = Math.max(state.currentStep - 1, 1);
            render();
        }

        async function handleSubmit() {
            if (!validateStep(state.currentStep)) {
                render();
                return;
            }

            state.isSubmitting = true;
            render();

            const roi = state.roiMetrics || calculateROI(state.formData);

            const payload = {
                submissionId: 'sub_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
                timestamp: new Date().toISOString(),
                answers: {
                    workflows: state.formData.workflows,
                    futureState: state.formData.futureState,
                    offerAndICP: state.formData.offerAndICP,
                    role: state.formData.role,
                    companySize: state.formData.companySize,
                    urgency: state.formData.urgency
                },
                roi: roi,
                inputs: {
                    workflowHoursPerWeek: state.formData.workflowHoursPerWeek,
                    avgHourlyRate: state.formData.avgHourlyRate
                },
                meta: {
                    userAgent: navigator.userAgent,
                    url: window.location.href
                }
            };

            try {
                console.log('Submission payload:', payload);
                await new Promise(resolve => setTimeout(resolve, 1500));
                state.isComplete = true;
            } catch (error) {
                console.error('Submission error:', error);
                alert('There was an issue submitting your diagnostic. Please try again.');
            } finally {
                state.isSubmitting = false;
                render();
            }
        }

        function renderProgressBar() {
            const progress = (state.currentStep / state.totalSteps) * 100;
            return '<div class="w-full h-1.5 bg-gray-300 rounded-full overflow-hidden mb-6"><div class="h-full rounded-full transition-all duration-300" style="width: ' + progress + '%; background: linear-gradient(to right, #2563EB, #22D3EE);"></div></div>';
        }

        function renderStep1() {
            return '<div class="space-y-6"><div><h2 class="text-2xl font-semibold text-[#0F172A] mb-3">If you had a digital employee that could handle 3–5 repetitive workflows in the next 30 days, which ones would you pick first?</h2><p class="text-sm text-[#6B7280] mb-4">Examples: inbox triage, lead qualification, repetitive reporting, CRM updates, scheduling, data entry, customer follow-ups.</p></div><textarea id="workflows" rows="5" placeholder="List the workflows you would automate first..." class="w-full px-4 py-3 rounded-xl bg-[#F9FAFB] border ' + (state.errors.workflows ? 'border-red-600' : 'border-gray-300') + ' text-[#0F172A] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#22D3EE] focus:border-transparent resize-none">' + state.formData.workflows + '</textarea>' + (state.errors.workflows ? '<p class="text-red-600 text-xs mt-1">' + state.errors.workflows + '</p>' : '') + '<div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-sm font-medium text-[#0F172A] mb-1.5">Hours per week on these workflows</label><input type="number" id="workflowHours" min="1" max="168" value="' + state.formData.workflowHoursPerWeek + '" class="w-full px-4 py-2.5 rounded-xl bg-[#F9FAFB] border border-gray-300 text-[#0F172A] focus:outline-none focus:ring-2 focus:ring-[#22D3EE] focus:border-transparent"><p class="text-xs text-[#6B7280] mt-1.5">Approximate total time spent</p></div><div><label class="block text-sm font-medium text-[#0F172A] mb-1.5">Avg. hourly cost ($)</label><input type="number" id="avgHourlyRate" min="10" max="500" value="' + state.formData.avgHourlyRate + '" class="w-full px-4 py-2.5 rounded-xl bg-[#F9FAFB] border border-gray-300 text-[#0F172A] focus:outline-none focus:ring-2 focus:ring-[#22D3EE] focus:border-transparent"><p class="text-xs text-[#6B7280] mt-1.5">Fully-loaded cost per hour</p></div></div></div>';
        }

        function renderStep2() {
            return '<div class="space-y-6"><div class="border-t-2 border-[#FACC15] pt-1 -mt-1"><div class="flex items-center gap-2 mb-3"><div class="w-2 h-2 rounded-full bg-[#FACC15]"></div><span class="text-xs font-medium text-[#FACC15] uppercase tracking-wide">Future Vision</span></div><h2 class="text-2xl font-semibold text-[#0F172A] mb-3">90 days from now, if this works exactly as you want—what is the one thing you would love to be true about your business?</h2><p class="text-sm text-[#6B7280] mb-4">Think about: faster response times, more qualified leads, more booked calls, hours saved per week, increased monthly revenue.</p></div><textarea id="futureState" rows="4" placeholder="In 90 days, I want..." class="w-full px-4 py-3 rounded-xl bg-[#F9FAFB] border ' + (state.errors.futureState ? 'border-red-600' : 'border-gray-300') + ' text-[#0F172A] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#22D3EE] focus:border-transparent resize-none">' + state.formData.futureState + '</textarea>' + (state.errors.futureState ? '<p class="text-red-600 text-xs mt-1">' + state.errors.futureState + '</p>' : '') + '</div>';
        }

        function renderStep3() {
            return '<div class="space-y-6"><div><h2 class="text-2xl font-semibold text-[#0F172A] mb-3">What does your company sell, and who is your ideal customer?</h2><p class="text-sm text-[#6B7280] mb-4">Help us understand your business so we can tailor the AI digital employee to your needs.</p></div><textarea id="offerAndICP" rows="4" placeholder="We sell... to..." class="w-full px-4 py-3 rounded-xl bg-[#F9FAFB] border ' + (state.errors.offerAndICP ? 'border-red-600' : 'border-gray-300') + ' text-[#0F172A] placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#22D3EE] focus:border-transparent resize-none">' + state.formData.offerAndICP + '</textarea>' + (state.errors.offerAndICP ? '<p class="text-red-600 text-xs mt-1">' + state.errors.offerAndICP + '</p>' : '') + '</div>';
        }

        function renderStep4() {
            const roles = [
                { value: 'founder', label: 'Founder / Owner' },
                { value: 'executive', label: 'C-Level / VP' },
                { value: 'operations', label: 'Operations / Systems' },
                { value: 'marketing', label: 'Marketing / Sales' },
                { value: 'other', label: 'Other' }
            ];

            let html = '<div class="space-y-6"><div><h2 class="text-2xl font-semibold text-[#0F172A] mb-3">Which best describes your role?</h2></div><div class="space-y-3">';
            
            roles.forEach(function(role) {
                const isSelected = state.formData.role === role.value;
                html += '<label class="radio-option flex items-center px-4 py-3.5 rounded-xl cursor-pointer border ' + (isSelected ? 'selected' : 'bg-[#F9FAFB] border-gray-300') + '"><input type="radio" name="role" value="' + role.value + '" ' + (isSelected ? 'checked' : '') + ' class="w-4 h-4 text-[#2563EB] border-gray-300 focus:ring-[#22D3EE] focus:ring-2"><span class="ml-3 text-[#0F172A] font-medium">' + role.label + '</span></label>';
            });
            
            html += '</div>' + (state.errors.role ? '<p class="text-red-600 text-sm">' + state.errors.role + '</p>' : '') + '</div>';
            return html;
        }

        function renderStep5() {
            const sizes = [
                { value: '1-5', label: '1–5' },
                { value: '6-20', label: '6–20' },
                { value: '21-50', label: '21–50' },
                { value: '51-200', label: '51–200' },
                { value: '200+', label: '200+' }
            ];

            let html = '<div class="space-y-6"><div><h2 class="text-2xl font-semibold text-[#0F172A] mb-3">How many employees are in your company?</h2></div><div class="space-y-3">';
            
            sizes.forEach(function(size) {
                const isSelected = state.formData.companySize === size.value;
                html += '<label class="radio-option flex items-center px-4 py-3.5 rounded-xl cursor-pointer border ' + (isSelected ? 'selected' : 'bg-[#F9FAFB] border-gray-300') + '"><input type="radio" name="companySize" value="' + size.value + '" ' + (isSelected ? 'checked' : '') + ' class="w-4 h-4 text-[#2563EB] border-gray-300 focus:ring-[#22D3EE] focus:ring-2"><span class="ml-3 text-[#0F172A] font-medium">' + size.label + '</span></label>';
            });
            
            html += '</div>' + (state.errors.companySize ? '<p class="text-red-600 text-sm">' + state.errors.companySize + '</p>' : '') + '</div>';
            return html;
        }

        function renderStep6() {
            const urgencies = [
                { value: 'exploring', label: 'Just exploring / Not urgent' },
                { value: 'interested', label: 'Interested, but timing is flexible' },
                { value: 'priority', label: 'This is a priority to solve in the next 60 days' }
            ];

            let html = '<div class="space-y-6"><div><h2 class="text-2xl font-semibold text-[#0F172A] mb-3">How serious are you about fixing this in the next 60 days?</h2></div><div class="space-y-3">';
            
            urgencies.forEach(function(urgency) {
                const isSelected = state.formData.urgency === urgency.value;
                html += '<label class="radio-option flex items-center px-4 py-3.5 rounded-xl cursor-pointer border ' + (isSelected ? 'selected' : 'bg-[#F9FAFB] border-gray-300') + '"><input type="radio" name="urgency" value="' + urgency.value + '" ' + (isSelected ? 'checked' : '') + ' class="w-4 h-4 text-[#2563EB] border-gray-300 focus:ring-[#22D3EE] focus:ring-2"><span class="ml-3 text-[#0F172A] font-medium">' + urgency.label + '</span></label>';
            });
            
            html += '</div>' + (state.errors.urgency ? '<p class="text-red-600 text-sm">' + state.errors.urgency + '</p>' : '');
            
            if (state.roiMetrics) {
                html += '<div class="mt-8 p-5 rounded-xl border border-[#22D3EE]/30" style="background: linear-gradient(to bottom right, rgba(37, 99, 235, 0.05), rgba(34, 211, 238, 0.05));"><h3 class="text-sm font-semibold text-[#0F172A] uppercase tracking-wide mb-4">Your Manual Work Burn</h3><div class="space-y-3"><div><p class="text-xs text-[#6B7280] mb-1">Hours per month</p><p class="text-2xl font-semibold text-[#0F172A]">~' + state.roiMetrics.estimatedHoursPerMonth + ' hours</p></div><div><p class="text-xs text-[#6B7280] mb-1">Current monthly cost</p><p class="text-2xl font-semibold text-[#0F172A]">$' + state.roiMetrics.estimatedCostPerMonth.toLocaleString() + '</p></div><div class="pt-3 border-t border-gray-300"><p class="text-xs text-[#6B7280] mb-1">Potential monthly savings (70% automation)</p><p class="text-2xl font-semibold text-[#16A34A]">$' + state.roiMetrics.estimatedSavingsPerMonth.toLocaleString() + '</p></div></div></div>';
            }
            
            html += '</div>';
            return html;
        }

        function renderSuccessScreen() {
            return '<div class="w-full max-w-2xl glass-card rounded-3xl px-8 py-12 text-center transition-content"><div class="mb-6"><div class="w-16 h-16 mx-auto mb-4 rounded-full bg-green-100 flex items-center justify-center"><svg class="w-8 h-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg></div><h1 class="text-4xl font-semibold text-[#0F172A] mb-4">Thanks—got it.</h1><p class="text-lg text-[#0F172A] leading-relaxed max-w-xl mx-auto mb-8">Based on your answers, the next step is a 30-minute call to map a specific AI digital employee to the workflows you selected.</p></div><div class="space-y-4"><button onclick="window.open(\'https://calendly.com\', \'_blank\')" class="btn-primary text-white px-8 py-3 rounded-full font-medium text-base">Book your time</button><p class="text-sm text-[#6B7280]">A personalized AI Digital Employee Blueprint will be sent to your email address.</p></div></div>';
        }

        function render() {
            const app = document.getElementById('app');

            if (state.isComplete) {
                app.innerHTML = renderSuccessScreen();
                return;
            }

            const stepFunctions = [null, renderStep1, renderStep2, renderStep3, renderStep4, renderStep5, renderStep6];
            const stepContent = stepFunctions[state.currentStep]();

            let html = '<div class="w-full max-w-2xl glass-card rounded-3xl px-6 py-6 md:px-8 md:py-8 transition-content">';
            html += renderProgressBar();
            html += '<div class="mb-6"><p class="text-sm font-medium text-[#6B7280] mb-1">Step ' + state.currentStep + ' of ' + state.totalSteps + '</p></div>';
            html += '<div class="mb-8">' + stepContent + '</div>';
            html += '<div class="flex items-center justify-between pt-6 border-t border-gray-300">';
            
            if (state.currentStep > 1) {
                html += '<button onclick="handleBack()" class="text-[#6B7280] hover:text-[#0F172A] transition-colors font-medium">← Back</button>';
            } else {
                html += '<div></div>';
            }
            
            if (state.currentStep < state.totalSteps) {
                html += '<button onclick="handleNext()" class="btn-primary text-white px-8 py-3 rounded-full font-medium text-base">Next →</button>';
            } else {
                html += '<button onclick="handleSubmit()" ' + (state.isSubmitting ? 'disabled' : '') + ' class="btn-primary text-white px-8 py-3 rounded-full font-medium text-base">' + (state.isSubmitting ? 'Submitting...' : 'Complete Diagnostic') + '</button>';
            }
            
            html += '</div></div>';
            app.innerHTML = html;

            attachEventListeners();
        }

        function attachEventListeners() {
            const workflows = document.getElementById('workflows');
            if (workflows) {
                workflows.addEventListener('input', function(e) {
                    state.formData.workflows = e.target.value;
                    delete state.errors.workflows;
                });
            }

            const workflowHours = document.getElementById('workflowHours');
            if (workflowHours) {
                workflowHours.addEventListener('input', function(e) {
                    state.formData.workflowHoursPerWeek = parseInt(e.target.value) || 10;
                });
            }

            const avgHourlyRate = document.getElementById('avgHourlyRate');
            if (avgHourlyRate) {
                avgHourlyRate.addEventListener('input', function(e) {
                    state.formData.avgHourlyRate = parseInt(e.target.value) || 50;
                });
            }

            const futureState = document.getElementById('futureState');
            if (futureState) {
                futureState.addEventListener('input', function(e) {
                    state.formData.futureState = e.target.value;
                    delete state.errors.futureState;
                });
            }

            const offerAndICP = document.getElementById('offerAndICP');
            if (offerAndICP) {
                offerAndICP.addEventListener('input', function(e) {
                    state.formData.offerAndICP = e.target.value;
                    delete state.errors.offerAndICP;
                });
            }

            const roleInputs = document.querySelectorAll('input[name="role"]');
            roleInputs.forEach(function(input) {
                input.addEventListener('change', function(e) {
                    state.formData.role = e.target.value;
                    delete state.errors.role;
                    render();
                });
            });

            const companySizeInputs = document.querySelectorAll('input[name="companySize"]');
            companySizeInputs.forEach(function(input) {
                input.addEventListener('change', function(e) {
                    state.formData.companySize = e.target.value;
                    delete state.errors.companySize;
                    render();
                });
            });

            const urgencyInputs = document.querySelectorAll('input[name="urgency"]');
            urgencyInputs.forEach(function(input) {
                input.addEventListener('change', function(e) {
                    state.formData.urgency = e.target.value;
                    delete state.errors.urgency;
                    render();
                });
            });
        }

        render();
    </script>
</body>
</html>
